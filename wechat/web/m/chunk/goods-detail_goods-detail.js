(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"241":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o,r,a=n(1),i=n(2),s=n(51),c=n(10),l=n.n(c),u=n(240),p=n.n(u),f=(n(242),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var d=(r=o=function(e){function loading(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,loading);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(loading.__proto__||Object.getPrototypeOf(loading)).call(this,e));return t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(loading,i["a"].Component),f(loading,[{"key":"render","value":function render(){var e=this.props,t=e.type,n=e.display,o=e.tipText,r=l()("loading",t,n);return a.k.createElement(s.a,{"className":r},a.k.createElement(s.a,{"className":"circle"}),a.k.createElement(s.a,{"className":"text"},o,"..."))}}]),loading}(),o.options={"addGlobalClass":!0},o.propTypes={"type":p.a.oneOf(["center","block","inline"]),"display":p.a.oneOf(["dark","light"]),"tipText":p.a.string},o.defaultProps={"type":"center","display":"dark","tipText":"加载中"},r)},"242":function(e,t,n){},"244":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o,r,a=n(1),i=n(2),s=n(259),c=n(51),l=n(240),u=n.n(l),p=(n(256),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var f=(r=o=function(e){function Price(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Price),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Price.__proto__||Object.getPrototypeOf(Price)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Price,i["a"].Component),p(Price,[{"key":"render","value":function render(){var e=this.props,t=e.price,n=e.marketPrice,o=e.center,r=e.isExchange,i=t>0?Math.floor(t):Math.ceil(t),l=parseFloat(t).toFixed(2).toString().replace(/-?[0-9]*(\.?[0-9]*)/g,"$1"),u=parseFloat(n).toFixed(2),p=this.props.type,f=void 0;r&&(p="points");var d="price"===p;return f="price"===p?a.k.createElement(s.a,null,"￥"):"points"===p?a.k.createElement(s.a,{"className":"iconfont icon-point"}):a.k.createElement(s.a,{"className":"iconfont icon-exp"}),a.k.createElement(c.a,{"className":"price "+(o?"price-center":"")},a.k.createElement(s.a,{"className":"price__main price--"+p},f,a.k.createElement(s.a,{"className":"price__int"},i),d&&a.k.createElement(s.a,{"className":"price__dec"},l)),u>0&&a.k.createElement(s.a,{"className":"price__market-price"},"￥",u))}}]),Price}(),o.options={"addGlobalClass":!0},o.defaultProps={"price":0,"marketPrice":NaN,"isExchange":!1,"type":"price"},r);f.propTypes={"price":u.a.oneOfType([u.a.number,u.a.string]).isRequired,"marketPrice":u.a.oneOfType([u.a.number,u.a.string]),"isExchange":u.a.bool,"type":u.a.oneOf(["price","points","exp"])}},"253":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o,r,a=n(1),i=n(2),s=n(124),c=n(51),l=n(258),u=n(240),p=n.n(u),f=(n(254),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var d=(r=o=function(e){function Tip(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Tip);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Tip.__proto__||Object.getPrototypeOf(Tip)).call(this,e));return t.onClickButtonHandle=function(){var e=t.props,n=e.mainActionType,o=e.onClickMain;"back"===n?i.a.navigateBack():"home"===n?"WEAPP"===i.a.getEnv()?Object(s.d)({"url":"/pages/index/index"}):(i.a.redirectTo({"url":"/pages/index/index"}),window.location.reload()):"custom"===n&&o()},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Tip,i["a"].Component),f(Tip,[{"key":"render","value":function render(){var e=this.props,t=e.type,n=e.icon,o=e.text,r=e.mainAction,i=e.height,s=e.mainActionType;return a.k.createElement(c.a,{"className":"tip "+t,"style":{"height":i}},a.k.createElement(c.a,{"className":"tip__content"},a.k.createElement(c.a,{"className":"iconfont icon-"+n}),a.k.createElement(c.a,{"className":"tip__text"},o),"none"!==s&&""!==r&&a.k.createElement(l.a,{"type":"primary","onClick":this.onClickButtonHandle},r)))}}]),Tip}(),o.options={"addGlobalClass":!0},o.defaultProps={"type":"auto","icon":"empty","text":"当前没有数据","height":"100%","mainAction":"返回上一级","mainActionType":"back"},r);d.propTypes={"type":p.a.oneOf(["full","auto"]),"icon":p.a.string,"text":p.a.string,"mainAction":p.a.string,"mainActionType":p.a.oneOf(["back","home","custom","none"]),"height":p.a.string,"onClickMain":p.a.func}},"254":function(e,t,n){},"256":function(e,t,n){},"268":function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o,r,a=n(1),i=n(2),s=n(51),c=n(280),l=n(10),u=n.n(l),p=n(240),f=n.n(p),d=(n(269),n(77)),m=n(241),h=n(253),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var y=(r=o=function(e){function List(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,List);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(List.__proto__||Object.getPrototypeOf(List)).call(this,e));return t.getData=function(){if(!t.loading&&!t.isFinished&&!t.showLoading){var e=t.apiName,n=t.params;t.loading=!0,Object(d.b)({"name":e,"data":k({"page":t.page++},n),"success":function success(e){var n=Array.isArray(e)?e:e.data||e.order,o=t.listData;o||(o=[]),o=o.concat(n),t.listData=o,t.props.onLoadData(o,e),0===o.length&&0===n.length&&t.setState({"isEmpty":!0}),n.length<t.props.numberPerPage&&(t.isFinished=!0,t.setState({"showLoading":!1})),t.loading=!1}})}},t.refreshData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.apiName,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.params;t.isFinished=!1,t.loading=!1,t.page=0,t.listData=[],t.apiName=e,t.params=n,t.setState({"showLoading":!0,"isEmpty":!1}),t.getData()},t.onClickButtonHandle=function(){t.props.onClickButton?t.props.onClickButton():i.a.navigateBack()},t.onScroll=function(e){var n=e.detail,o=n.scrollTop;n.scrollHeight-o<800&&t.getData()},t.page=0,t.isFinished=!1,t.loading=!1,t.listData=[],t.apiName="",t.params={},t.state={"isEmpty":!1,"showLoading":!0},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(List,i["a"].Component),b(List,[{"key":"componentWillMount","value":function componentWillMount(){var e=this,t=this.props,n=t.event,o=t.onMount;i.a.eventCenter.on("load:"+n,function(){e.getData()}),i.a.eventCenter.on("reload:"+n,function(t,n){e.refreshData(t,n)}),o()}},{"key":"componentWillUnmount","value":function componentWillUnmount(){var e=this.props.event;i.a.eventCenter.off("load:"+e),i.a.eventCenter.off("reload:"+e)}},{"key":"render","value":function render(){var e=this.listData,t=void 0;this.willReload&&(this.willReload=!1),t=e.length>0?a.k.createElement(s.a,null,a.k.createElement(c.a,{"scrollY":!0,"onScroll":this.onScroll,"className":"scroll-content"},this.props.children,e&&this.state.showLoading&&a.k.createElement(m.a,{"type":"inline"}))):this.state.isEmpty?a.k.createElement(h.a,{"icon":"empty","text":this.props.emptyTip,"mainActionType":"back","mainAction":this.props.buttonText,"onClickMain":this.onClickButtonHandle,"type":"full"===this.props.mode?"full":"auto"}):a.k.createElement(m.a,{"type":"block"===this.props.mode?"block":void 0});var n=u()("list",{"block":"block"===this.props.mode,"empty":this.state.isEmpty,"full":"full"===this.props.mode});return a.k.createElement(s.a,{"className":n},t)}}]),List}(),o.options={"addGlobalClass":!0},o.defaultProps={"event":"page","apiName":"","numberPerPage":10,"data":{},"emptyTip":"没有内容","buttonText":"返回上一级","mode":"full","onLoadData":function onLoadData(){},"onMount":function onMount(){}},o.propTypes={"event":f.a.string,"numberPerPage":f.a.number,"emptyTip":f.a.string,"buttonText":f.a.string,"mode":f.a.string,"onLoadData":f.a.func,"onMount":f.a.func},r)},"269":function(e,t,n){},"271":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o,r,a=n(1),i=n(2),s=n(259),c=n(51),l=n(240),u=n.n(l),p=(n(281),n(244)),f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var d=(r=o=function(e){function Cell(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Cell);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Cell.__proto__||Object.getPrototypeOf(Cell)).call(this,e));return t.onClick=function(){var e=t.props,n=e.disabled,o=e.onClick;n||o&&o()},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Cell,i["a"].Component),f(Cell,[{"key":"render","value":function render(){var e=this.props,t=e.title,n=e.type,o=e.isExchange,r=e.isPrice,i=e.isLink,l=e.icon,u=e.disabled,f=e.value,d="cell "+(u?"disabled":i?"can-click ":""),m=void 0,h=void 0;return m="text"!==n?a.k.createElement(p.a,{"price":f,"type":n}):o?a.k.createElement(p.a,{"price":f,"isExchange":!0}):r?a.k.createElement(p.a,{"price":f}):a.k.createElement(s.a,null,f),!u&&i&&(h=a.k.createElement(s.a,{"className":"iconfont icon-right"})),a.k.createElement(c.a,{"className":d,"onClick":this.onClick},a.k.createElement(s.a,{"className":"left"},l&&a.k.createElement(s.a,{"className":"iconfont icon-"+l}),a.k.createElement(s.a,{"className":"text"},t)),a.k.createElement(c.a,null,m,this.props.children,h))}}]),Cell}(),o.options={"addGlobalClass":!0},o.defaultProps={"disabled":!1,"title":"","value":"","type":"text","isPrice":!1,"isExchange":!1,"isLink":!1},o.propTypes={"title":u.a.string.isRequired,"value":u.a.oneOfType([u.a.string,u.a.number]),"type":u.a.string,"isPrice":u.a.bool,"isExchange":u.a.bool,"isLink":u.a.bool,"disabled":u.a.bool,"onClick":u.a.func},r)},"279":function(e,t,n){"use strict";n.d(t,"b",function(){return setGlobalData}),n.d(t,"a",function(){return getGlobalData});var o={};function setGlobalData(e,t){o[e]=t}function getGlobalData(e){return o[e]}},"281":function(e,t,n){},"285":function(e,t,n){"use strict";n.d(t,"a",function(){return k});var o,r,a=n(1),i=n(2),s=n(288),c=n(275),l=n(51),u=n(259),p=n(240),f=n.n(p),d=n(10),m=n.n(d),h=(n(286),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var k=(r=o=function(e){function UserCell(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserCell);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(UserCell.__proto__||Object.getPrototypeOf(UserCell)).call(this,e));return t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(UserCell,i["a"].Component),h(UserCell,[{"key":"render","value":function render(){var e=this.state.rightText,t=this.props,n=t.avatar,o=t.nickname,r=t.isOpenData,i=t.errorText,p=t.size,f=t.text,d=void 0;return d=r?a.k.createElement(s.a,{"type":"userAvatarUrl","className":"avatar"}):n?a.k.createElement(c.a,{"src":this.props.avatar,"className":"avatar"}):a.k.createElement(l.a,{"className":"avatar-placeholder"}),a.k.createElement(l.a,{"className":m()("user-cell",p)},a.k.createElement(l.a,{"className":"left"},a.k.createElement(l.a,null,d),a.k.createElement(l.a,null,r?a.k.createElement(s.a,{"className":"nickname","type":"userNickName"}):a.k.createElement(u.a,{"className":"nickname"},o||i),f&&a.k.createElement(u.a,{"className":"text"},f))),e&&a.k.createElement(l.a,{"className":"right"},e),a.k.createElement(l.a,{"className":"right"},this.props.children))}}]),UserCell}(),o.options={"addGlobalClass":!0},o.defaultProps={"nickname":"","avatar":"","text":"","rightText":"","errorText":"无法获取昵称","isOpenData":!1,"size":"normal"},o.propTypes={"avatar":f.a.string,"nickname":f.a.string,"isOpenData":f.a.bool,"errorText":f.a.string,"size":f.a.string},r)},"286":function(e,t,n){},"289":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o,r,a=n(1),i=n(2),s=n(51),c=n(258),l=n(240),u=n.n(l),p=n(10),f=n.n(p),d=(n(301),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var m=(r=o=function(e){function ActionBar(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ActionBar);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ActionBar.__proto__||Object.getPrototypeOf(ActionBar)).call(this,e));return t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ActionBar,i["a"].Component),d(ActionBar,[{"key":"render","value":function render(){var e=this.props,t=e.isButtonFill,n=e.mainButton,o=e.minorButton,r=e.disabled,i=e.disabledMain,l=e.disabledMinor,u=e.onClickMain,p=e.onClickMinor,d=e.tip,m=f()("action-bar",{"fixed":this.props.fixed,"no-fixed":this.props.noFixed,"need-margin":this.props.needMargin});return a.k.createElement(s.a,{"className":m},d&&a.k.createElement(s.a,{"className":"action-bar__tip"},d),a.k.createElement(s.a,{"className":f()("action-bar--body",{"button-list--fill":t})},a.k.createElement(s.a,{"className":"left custom-render render-left"},this.props.renderLeft),a.k.createElement(s.a,{"className":"right"},a.k.createElement(s.a,{"className":"custom-render render-right"},this.props.renderRight),a.k.createElement(s.a,{"className":"button-list"},o&&a.k.createElement(c.a,{"className":"button-minor","onClick":p,"disabled":r||d||l},o),n&&a.k.createElement(c.a,{"type":"primary","className":"purchase","onClick":u,"disabled":r||d||i},n)))))}}]),ActionBar}(),o.options={"addGlobalClass":!0},o.propTypes={"mainButton":u.a.string,"minorButton":u.a.string,"disabledMain":u.a.bool,"disabledMinor":u.a.bool,"renderLeft":u.a.node,"renderRight":u.a.node,"price":u.a.oneOfType([u.a.number,u.a.string]),"needMargin":u.a.bool,"fixed":u.a.bool,"onClickMain":u.a.func,"onClickMinor":u.a.func,"isPoints":u.a.bool,"isButtonFill":u.a.bool},o.defaultProps={"disabled":!1,"noFixed":!1,"fixed":!0,"needMargin":!1,"isButtonFill":!1,"disabledMain":!1,"disabledMinor":!1,"tip":"","onClickMain":function onClickMain(){},"onClickMinor":function onClickMinor(){}},r)},"290":function(e,t,n){"use strict";function startCountDown(e){var t=e.time,n=e.updatedCallback,o=e.endCallback,r=void 0===o?function(){}:o,a=e.delay,i=void 0===a?0:a,s=e.updateCycle,c=void 0===s?1e3:s,l=void 0,u=function update(){var e=new Date(t+i)-new Date,o=void 0,a=void 0,s=void 0,c=void 0;if(e>1e3){o=Math.floor(e/864e5);var u=e%864e5;a=Math.floor(u/36e5),u%=36e5,s=Math.floor(u/6e4),u%=6e4,c=Math.floor(u/1e3)}e>=1e3?n(o,a,s,c):(clearInterval(l),r())};return u(),l=setInterval(function(){u()},c)}n.d(t,"a",function(){return startCountDown})},"298":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(1),r=n(2),a=n(51),i=n(258),s=n(259),c=(n(299),n(77)),l=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var u=function(e){function Index(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Index);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Index.__proto__||Object.getPrototypeOf(Index)).call(this,e));return t.sub=function(e){t.props.async?Object(c.b)({"name":"subGoodsNumberOfCart","data":{"id":t.props.param},"success":function success(){t.props.onChange(t.props.value-1,t.props.param)}}):t.props.onChange(t.props.value-1,t.props.param),e.stopPropagation()},t.add=function(e){t.props.async?Object(c.b)({"name":"plusGoodsNumberOfCart","data":{"id":t.props.param},"success":function success(){t.props.onChange(t.props.value+1,t.props.param)}}):t.props.onChange(t.props.value+1,t.props.param),e.stopPropagation()},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,r["a"].Component),l(Index,[{"key":"stopPropagation","value":function stopPropagation(e){e.stopPropagation()}},{"key":"render","value":function render(){return o.k.createElement(a.a,{"className":"stepper"},o.k.createElement(i.a,{"className":"sub","disabled":this.props.min&&this.props.value<=this.props.min,"onClick":this.sub},"-"),o.k.createElement(s.a,{"className":"value","onClick":this.stopPropagation},o.k.createElement(s.a,null,this.props.value)),o.k.createElement(i.a,{"className":"add","disabled":this.props.max&&this.props.value>=this.props.max,"onClick":this.add},"+"))}}]),Index}()},"299":function(e,t,n){},"301":function(e,t,n){},"310":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o,r,a=n(1),i=n(2),s=n(51),c=n(327),l=n(240),u=(n(311),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var p=(r=o=function(e){function RichTextPro(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RichTextPro);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(RichTextPro.__proto__||Object.getPrototypeOf(RichTextPro)).call(this,e));return t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(RichTextPro,i["a"].Component),u(RichTextPro,[{"key":"componentDidMount","value":function componentDidMount(){if("WEAPP"===i.a.getEnv()){var e=this.props.nodes;(void 0).wxParse("article","html",e,this.$scope,0)}}},{"key":"render","value":function render(){var e=this.props,t=e.nodes,n=e.backgroundColor,o=e.horizontalPadding,r=e.verticalPadding;return a.k.createElement(s.a,{"className":"rich-text-pro","style":{"padding":r+"rpx "+o+"rpx","backgroundColor":n}},a.k.createElement(c.a,{"nodes":t}))}}]),RichTextPro}(),o.options={"addGlobalClass":!0},o.propTypes={"nodes":l.string.isRequired,"backgroundColor":l.string,"horizontalPadding":l.number,"verticalPadding":l.number},o.defaultProps={"nodes":"","backgroundColor":"#fff","horizontalPadding":40,"verticalPadding":40},r)},"311":function(e,t,n){},"314":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o,r,a=n(1),i=n(2),s=n(51),c=n(259),l=(n(315),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var u=(r=o=function(e){function Rate(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Rate);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Rate.__proto__||Object.getPrototypeOf(Rate)).call(this,e));return t.onChange=function(e){t.props.onChange&&t.props.onChange(e)},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Rate,i["a"].Component),l(Rate,[{"key":"render","value":function render(){var e=this,t=Object.keys(Array.from({"length":5}));this.props.onChange;return a.k.createElement(s.a,{"className":"rate"},t.map(function(t,n){return a.k.createElement(c.a,{"key":t,"className":"iconfont "+(n<e.props.value?"icon-star-fill":"icon-star"),"onClick":e.onChange.bind(e,n+1)})}))}}]),Rate}(),o.options={"addGlobalClass":!0},o.defaultProps={"max":5,"value":5},r)},"315":function(e,t,n){},"372":function(e,t,n){},"374":function(e,t,n){},"376":function(e,t,n){},"378":function(e,t,n){},"380":function(e,t,n){},"382":function(e,t,n){},"535":function(e,t,n){"use strict";n.r(t);var o,r,a,i=n(1),s=n(2),c=n(239),l=n(328),u=n(259),p=n(537),f=n(275),d=n(51),m=n(260),h=n(540),k=n(500),b=(n(372),n(77)),y=n(244),g=n(271),v=n(289),_=n(241),E=n(10),C=n.n(E),P=(n(374),n(298)),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var S,j,T=(r=o=function(e){function Index(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Index);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Index.__proto__||Object.getPrototypeOf(Index)).call(this,e));a.call(t);var n=t.props,o=n.skuList,r=n.combination;return t.initSkuList=o.map(function(e,t){return O({},e,{"attr":e.attr.map(function(e){return O({},e,{"disabled":!r.find(function(n){return n.attr[t]==e.id})})})})}),t.state={"skuListForRender":t.initSkuList,"checkedAttrs":o.map(function(){return-1}),"checkedSku":null,"purchaseQuantity":1},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,s["a"].Component),w(Index,[{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){var t=e.skuList,n=e.combination;this.initSkuList=t.map(function(e,t){return O({},e,{"attr":e.attr.map(function(e){return O({},e,{"disabled":!n.find(function(n){return n.attr[t]==e.id})})})})}),this.setState({"skuListForRender":this.initSkuList})}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.show,o=t.isExchange,r=t.mainButton,a=t.goodsInfo,s=this.state,c=s.skuListForRender,l=s.checkedSku,p=void 0,m=void 0,h=void 0,k=void 0,b=void 0,g=void 0,_=void 0,E=void 0,O=!1;return(r&&r.includes("我要开团")||"确认参团"===r)&&(O=!0),c&&(p=(m=a.limit_count)>0?l&&l.stock>0?Math.min(m,l.stock):a.stock>0?Math.min(m,a.stock):m:l&&l.stock>0?l.stock:a.stock>0?a.stock:void 0,b=l?i.k.createElement(y.a,{"price":l.price}):O?i.k.createElement(y.a,{"price":a.commodity_price,"marketPrice":a.shop_price}):i.k.createElement(y.a,{"price":o?a.points:a.shop_price,"marketPrice":o?void 0:a.market_price,"isExchange":o}),g=(l?-1===l.stock:-1===a.stock)?i.k.createElement(u.a,{"className":"stock"},"有货"):l&&l.stock>0?i.k.createElement(u.a,{"className":"stock"},"剩余",l.stock,"件"):a.stock>0?i.k.createElement(u.a,{"className":"stock"},"剩余",a.stock,"件"):null,_=i.k.createElement(d.a,{"className":"sku__header"},i.k.createElement(f.a,{"className":"goods-img","src":a.goods_img,"mode":"aspectFit"}),i.k.createElement(d.a,{"className":"right"},i.k.createElement(d.a,{"className":"goods-name"},a.goods_name),b),i.k.createElement(d.a,{"className":"iconfont icon-close","onClick":this.props.onHide})),k=c.map(function(t,n){return i.k.createElement(d.a,{"className":"sku-item","key":t.attr[0].id},i.k.createElement(u.a,{"className":"name"},t.name),i.k.createElement(d.a,{"className":"attr"},t.attr.map(function(t){var o=e.state.checkedAttrs,r=C()({"checked":o[n]&&o[n]===t.id,"disabled":t.disabled});return i.k.createElement(u.a,{"key":t.id,"className":r,"onClick":e.onClickSku.bind(void 0,n,t)},t.attr_value)})))}),E=i.k.createElement(d.a,{"className":"quantity"},i.k.createElement(d.a,null,i.k.createElement(d.a,null,"购买数量："),i.k.createElement(d.a,null,g,a.limit_count>0&&i.k.createElement(u.a,{"className":"limit"},"限购",a.limit_count,"件"))),i.k.createElement(P.a,{"value":this.state.purchaseQuantity,"max":p,"min":1,"onChange":this.setQuantity})),h=i.k.createElement(d.a,null,n&&i.k.createElement(d.a,{"className":"shade","onClick":this.props.onHide}),i.k.createElement(d.a,{"className":"model-content "+(n?"show-sku":"hide-sku")},_,i.k.createElement(d.a,{"className":"main"},k,E),i.k.createElement(v.a,{"noFixed":!0,"hideNav":!0,"isButtonFill":!0,"mainButton":this.props.mainButton,"minorButton":this.props.minorButton,"onClickMain":this.onClickMain,"onClickMinor":this.onClickMinor})))),i.k.createElement(d.a,{"className":"sku"},h)}}]),Index}(),o.defaultProps={"show":!1,"goodsInfo":{},"skuList":[],"combination":[],"onHide":function onHide(){},"onAddToCart":function onAddToCart(){},"onPurchase":function onPurchase(){}},a=function _initialiseProps(){var e=this;this.onClickSku=function(t,n){if(n.disabled)return!1;var o=e.props,r=o.skuList,a=o.combination,i=e.state,s=i.skuListForRender,l=i.checkedAttrs,u=i.purchaseQuantity,p=e.initSkuList,f=null;l[t]===n.id?l[t]=-1:l[t]=n.id;var d=l.filter(function(e){return e>0});d.length===r.length&&(f=a.find(function(e){return e.attr.every(function(e,t){return e==d[t]})})).stock&&f.stock>=0&&u>f.stock&&(u=f.stock,Object(c.d)({"title":"此规格库存小于您选择的数量，已重新设置数量","icon":"none","duration":3e3})),s=l.filter(function(e){return e>0}).length>0?r.map(function(e,t){var n=e.attr.map(function(e){var n=a.find(function(n){var o=!0;return n.attr.forEach(function(n,r){var a=t!==r&&l[r]>0&&l[r]!=n,i=r===t&&e.id!=n;(a||i)&&(o=!1)}),o});return O({},e,{"disabled":!n})});return O({},e,{"attr":n})}):JSON.parse(JSON.stringify(p)),e.setState({"checkedAttrs":l,"skuListForRender":s,"purchaseQuantity":u,"checkedSku":f})},this.setQuantity=function(t){e.setState({"purchaseQuantity":t})},this.onAddToCart=function(){var t=e.state.skuList;if(0===t.length||e.state.checkedSku){var n=e.state.goodsInfo.id,o=e.state.purchaseQuantity,r=0===t.length?0:e.state.checkedSku.id;e.props.onAddToCart(n,o,r)}else Object(c.d)({"title":"请选择完整的规格","icon":"none"})},this.onClickActionButton=function(t){var n=e.props.skuList;if(0===n.length||e.state.checkedSku){var o=e.props.goodsInfo.id||e.props.goodsInfo.goods_id,r=e.state.purchaseQuantity,a=0===n.length?0:e.state.checkedSku.id;"main"===t?e.props.onClickMain(o,r,a):e.props.onClickMinor(o,r,a)}else Object(c.d)({"title":"请选择完整的规格","icon":"none"})},this.onClickMain=function(){e.onClickActionButton("main")},this.onClickMinor=function(){e.onClickActionButton("minor")}},r),x=(n(376),n(268)),N=n(314),B=n(285),D=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var R,M,L=(j=S=function(e){function Comment(e){!function Comment_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Comment);var t=function Comment_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Comment.__proto__||Object.getPrototypeOf(Comment)).call(this,e));return t.onLoadData=function(e){t.setState({"commentList":e})},t.gotoWriteButton=function(){s.a.navigateTo({"url":"../../../../comment/comment?goods_id="+t.props.goodsId})},t.state={"commentList":null},t}return function Comment_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Comment,s["a"].Component),D(Comment,[{"key":"render","value":function render(){var e=this.state.commentList,t=void 0;return e&&(t=e.map(function(e){return i.k.createElement(d.a,{"className":"comment-item","key":e.id},i.k.createElement(d.a,{"className":"header"},i.k.createElement(B.a,{"avatar":e.user_id.avatar,"nickname":e.user_id.nickname,"size":"mini"},i.k.createElement(N.a,{"value":e.comment_star}))),i.k.createElement(d.a,{"className":"content"},e.comment_content),e.picture.length>0&&i.k.createElement(d.a,{"className":"picture"},e.picture.map(function(e,t){return i.k.createElement(f.a,{"key":t,"src":e,"mode":"aspectFit"})})))})),i.k.createElement(d.a,{"className":"comment"},i.k.createElement(x.a,{"event":"goodsCommentList","emptyTip":"此商品当前没有评论","buttonText":"","onLoadData":this.onLoadData,"mode":"block"},t))}}]),Comment}(),S.options={"addGlobalClass":!0},S.defaultProps={},j),G=n(258),A=n(240),I=n.n(A),F=(n(378),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var U,W,H=(M=R=function(e){function GroupBooking(e){!function GroupBooking_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GroupBooking);var t=function GroupBooking_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(GroupBooking.__proto__||Object.getPrototypeOf(GroupBooking)).call(this,e));return t.state={},t}return function GroupBooking_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(GroupBooking,s["a"].Component),F(GroupBooking,[{"key":"render","value":function render(){var e=this,t=this.props,n=t.goodsInfo,o=t.regimentId,r=t.onShowSkuForJoin,a=t.regimentByShare,s=n&&n.regimentInfo,c=a&&["进行中","已完成"][a.regiment_status],l=void 0,p=void 0;return a&&(l=i.k.createElement(d.a,{"className":"regiment-info"},i.k.createElement(d.a,{"className":"type__title"},"好友分享的团"),i.k.createElement(d.a,{"className":"status"},i.k.createElement(g.a,{"title":"拼团状态","value":c}),a.lack_people>0&&i.k.createElement(d.a,{"className":"number"},i.k.createElement(u.a,{"className":"regiment__tip"},"还差",a.lack_people,"人拼满"),i.k.createElement(G.a,{"type":"primary","size":"mini","onClick":r.bind(this,o)},"参团"))),i.k.createElement(d.a,{"className":"title"},"拼团成员"),i.k.createElement(d.a,{"className":"member__list"},a.member_avatar.map(function(e,t){return i.k.createElement(f.a,{"key":t,"mode":"aspectFit","src":e})})),i.k.createElement(d.a,{"className":"type__title"},"其它团"))),n.regimentInfo&&(p=s.map(function(t){return i.k.createElement(d.a,{"key":t.regiment_id,"className":"group-booking__cell"},i.k.createElement(d.a,{"className":"left"},i.k.createElement(f.a,{"src":t.lead_avatar}),i.k.createElement(d.a,{"className":"main"},i.k.createElement(d.a,{"className":"regiment__name"},t.regiment_name),i.k.createElement(d.a,{"className":"number"},"还差",t.lack_people,"人"))),i.k.createElement(G.a,{"type":"primary","size":"mini","onClick":r.bind(e,t.regiment_id)},"参团"))})),i.k.createElement(d.a,{"className":"group-booking"},i.k.createElement(d.a,{"className":"group-booking--block"},i.k.createElement(d.a,{"className":"iconfont icon-tip title"},"拼团玩法"),i.k.createElement(d.a,{"className":"help"},"开团/参团 > 邀请好友 > 满员发货（不满员自动退款）"),l,i.k.createElement(d.a,{"className":"group-booking__list"},p)))}}]),GroupBooking}(),R.options={"addGlobalClass":!0},R.defaultProps={"goodsInfo":{},"regimentId":0,"onShowSkuForJoin":function onShowSkuForJoin(){}},R.propTypes={"goodsInfo":I.a.object.isRequired,"regimentId":I.a.number,"onShowSkuForJoin":I.a.func},M),$=n(253),J=n(279),z=(n(380),n(290)),Q=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var q=(W=U=function(e){function ActivityBar(e){!function ActivityBar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ActivityBar);var t=function ActivityBar_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ActivityBar.__proto__||Object.getPrototypeOf(ActivityBar)).call(this,e));return t.state={"countDown":null,"endText":null,"error":null},t}return function ActivityBar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ActivityBar,s["a"].Component),Q(ActivityBar,[{"key":"componentWillMount","value":function componentWillMount(){var e=this,t=this.props,n=t.activity;if("secKill"===t.type){var o=1e3*n.startTime,r=1e3*n.endTime,a=n.price,i=new Date,s=function start(){e.timer=Object(z.a)({"time":r,"updatedCallback":function updatedCallback(t,n,o,r){e.setState({"countDown":(t>0?t+" 天 ":"")+n+":"+o+":"+r,"endText":"结束"})},"endCallback":function endCallback(){e.setState({"error":"秒杀活动已结束，敬请关注后续活动"}),e.props.onUpdatePrice("end")},"delay":1e3})};o||this.setState({"error":"当前没有秒杀活动，敬请关注后续活动"}),o<i&&i<r?(this.props.onUpdatePrice("start",a),s()):i<o?this.timer=Object(z.a)({"time":o,"updatedCallback":function updatedCallback(t,n,o,r){e.setState({"countDown":(t>0?t+" 天 ":"")+n+":"+o+":"+r,"endText":"开始"})},"endCallback":function endCallback(){s(),e.props.onUpdatePrice("start",a)},"delay":1e3}):this.setState({"error":"秒杀活动已结束，敬请关注后续活动"})}}},{"key":"componentWillUnmount","value":function componentWillUnmount(){clearInterval(this.timer)}},{"key":"render","value":function render(){var e=this.state,t=e.error,n=e.countDown,o=e.endText,r=this.props,a=r.activity,s=r.type,c=void 0;return t?c=i.k.createElement(d.a,null):"secKill"===s&&(c=i.k.createElement(d.a,{"className":"activity-bar"},i.k.createElement(d.a,{"className":"count-down-row"},i.k.createElement(u.a,null,{"secKill":"秒杀"}[s],"活动将在"),i.k.createElement(u.a,{"className":"count-down"},n),i.k.createElement(u.a,null,"后",o)),"开始"===o&&i.k.createElement(d.a,{"className":"price-bar"},i.k.createElement(u.a,null,"秒杀价"),i.k.createElement(y.a,{"price":a.price})))),i.k.createElement(d.a,null,c)}}]),ActivityBar}(),U.options={"addGlobalClass":!0},U.defaultProps={"activity":{},"onUpdatePrice":function onUpdatePrice(){}},W);q.propTypes={"activity":I.a.object,"type":I.a.oneOf(["secKill"]),"onUpdatePrice":I.a.func};var K,Y,V=n(310),X=n(124),Z=(n(382),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var ee=(Y=K=function(e){function LeftOfActionBar(e){!function LeftOfActionBar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LeftOfActionBar);var t=function LeftOfActionBar_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(LeftOfActionBar.__proto__||Object.getPrototypeOf(LeftOfActionBar)).call(this,e));return t.state={},t}return function LeftOfActionBar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(LeftOfActionBar,s["a"].Component),Z(LeftOfActionBar,[{"key":"gotoLink","value":function gotoLink(e){"WEAPP"===s.a.getEnv()?Object(X.d)({"url":e}):(s.a.redirectTo({"url":e}),window.location.reload())}},{"key":"render","value":function render(){var e=this.props,t=e.isStarred,n=e.onClickStar;return i.k.createElement(d.a,{"className":"nav-btn"},i.k.createElement(d.a,{"onClick":this.gotoLink.bind(void 0,"/pages/cart/cart")},i.k.createElement(u.a,{"className":"iconfont icon-cart"})),i.k.createElement(d.a,{"onClick":n},i.k.createElement(u.a,{"className":"iconfont "+(t?"icon-star-fill":"icon-star")})))}}]),LeftOfActionBar}(),K.options={"addGlobalClass":!0},K.propTypes={"isStarred":I.a.bool,"onClickStar":I.a.func},K.defaultProps={},Y);n.d(t,"default",function(){return oe});var te=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),ne=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};var oe=function(e){function GoodsDetail(e){!function goods_detail_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GoodsDetail);var t=function goods_detail_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(GoodsDetail.__proto__||Object.getPrototypeOf(GoodsDetail)).call(this,e));return t.config={"navigationBarTitleText":"商品详情"},t.getData=function(){if("1"===t.$router.params.is_group_booking){var e=t.$router.params,n=e.regiment_id,o=e.id;Object(b.b)({"name":"getGroupBookingGoodsDetail","data":{"groupbooking_id":o},"success":function success(e){Object(b.b)({"name":"queryIsStarred","data":{"goods_id":e.info.goods_id},"success":function success(e){t.setState({"isStarred":e.status>0})}}),t.setState({"goodsInfo":e})}}),n&&Object(b.b)({"name":"getRegimentInfo","data":{"regiment_id":n,"groupbooking_id":o},"success":function success(e){t.setState({"regimentByShare":e})}})}else Object(b.b)({"name":"getGoodsDetail","data":{"id":t.$router.params.id},"success":function success(e){Object(b.b)({"name":"queryIsStarred","data":{"goods_id":e.info.id},"success":function success(e){t.setState({"isStarred":e.status>0})}}),t.setState({"goodsInfo":e})},"fail":function fail(e){-1===e.code&&t.setState({"isNonExist":!0})},"hideToast":!0})},t.showSku=function(){"1"===t.$router.params.is_exchange?t.setState({"isShowSku":!0,"skuButtonType":"main"}):t.setState({"isShowSku":!0,"skuButtonType":"both"})},t.onAddToCart=function(e,n,o){Object(b.b)({"name":"addToCart","data":{"id":e,"number":n,"skuId":o},"success":function success(){t.hideSku(),s.a.eventCenter.trigger("updateCart")},"hintText":"加入购物车"})},t.onClickMain=function(e,n,o){"number"==typeof e?"1"===t.$router.params.is_exchange?t.exchange(e,n,o):"join"===t.state.skuButtonType?t.joinGroupBooking(t.currentGroupId,n,o):"1"===t.$router.params.is_group_booking?t.onCreateGroupBooking(e,n,o):t.onPurchase(e,n,o):t.setState({"isShowSku":!0,"skuButtonType":"main"})},t.exchange=function(e,t,n){Object(b.b)({"name":"submitPointsOrder","data":{"goodsId":e,"number":t,"skuId":n},"success":function success(e){s.a.navigateTo({"url":"../order/order?id="+e.orderId+"&is_exchange=1"})},"fail":function fail(e){2===e.code&&(s.a.navigateTo({"url":"../edit-address/edit-address"}),Object(c.d)({"title":"当前没有收货地址，请先新建一个收货地址","icon":"none","duration":3e3}))}})},t.onClickMinor=function(e,n,o){"number"==typeof e?"1"===t.$router.params.is_group_booking?t.onPurchase(e,n,o):t.onAddToCart(e,n,o):t.setState({"isShowSku":!0,"skuButtonType":"minor"})},t.onPurchase=function(e,t,n){Object(b.b)({"name":"purchase","data":{"id":e,"number":t,"skuId":n},"success":function success(e){s.a.navigateTo({"url":"../order/order?id="+e.orderId})},"fail":function fail(e){2===e.code&&(s.a.navigateTo({"url":"../edit-address/edit-address"}),Object(c.d)({"title":"当前没有收货地址，请先新建一个收货地址","icon":"none","duration":3e3}))}})},t.hideSku=function(){t.setState({"isShowSku":!1})},t.goBack=function(){s.a.navigateBack()},t.onClickStar=function(){var e=void 0,n=void 0,o=t.state.goodsInfo.info.goods_id||t.state.goodsInfo.info.id;t.state.isStarred>0?(e="unstarGoods",n="取消收藏"):(e="starGoods",n="收藏"),Object(b.b)({"name":e,"data":{"goods_id":o},"success":function success(){t.setState({"isStarred":!t.state.isStarred})},"hintText":n})},t.onChangeTab=function(e){e!==t.state.activeTab&&(t.setState({"activeTab":e}),1===e&&s.a.eventCenter.trigger("reload:goodsCommentList","getGoodsComment",{"goods_id":t.state.goodsInfo.info.id}))},t.onCreateGroupBooking=function(e,n,o){Object(b.b)({"name":"createGroupBooking","data":{"groupbooking_id":t.state.goodsInfo.info.groupbooking_id,"number":n,"sku_id":o},"success":function success(e){s.a.navigateTo({"url":"../order/order?id="+e.order_id})}})},t.onShowSkuForJoin=function(e){t.currentGroupId=e,t.setState({"isShowSku":!0,"skuButtonType":"join"})},t.joinGroupBooking=function(e,n,o){Object(b.b)({"name":"joinGroupBooking","data":{"regiment_id":e,"groupbooking_id":t.state.goodsInfo.info.groupbooking_id,"number":n,"sku_id":o},"success":function success(e){s.a.navigateTo({"url":"../order/order?id="+e.order_id})}})},t.onUpdatePrice=function(e){t.setState({"activityStatus":e})},t.hasChoose=!1,t.currentGroupId=-1,t.state={"goodsInfo":null,"isNonExist":!1,"isShowSku":!1,"isStarred":!1,"skuButtonType":"","regimentByShare":null,"activeTab":0,"activityStatus":""},t}return function goods_detail_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(GoodsDetail,s["a"].Component),te(GoodsDetail,[{"key":"componentWillMount","value":function componentWillMount(){var e=this;Object(J.b)("submittedCartIds",[]),s.a.eventCenter.on("update:goodsDetail",function(){e.getData()}),this.getData()}},{"key":"onShareAppMessage","value":function onShareAppMessage(){var e=this.state.goodsInfo.info,t=e.goods_name,n=e.setmaxuser,o=e.commodity_price,r=e.shop_price,a="1"===this.$router.params.is_group_booking,i=void 0,s="";if(a&&(s="（原价￥"+r+"）"),a){var c="（"+n+"人拼团价 ￥"+o+"）";i="拼团价￥"+o+" | "+(t.indexOf("人拼团")>=0?t.replace(/（.人?拼团价?.*）/,c):t)+s}else i="￥"+r+" | "+t+s;return{"title":i}}},{"key":"onPullDownRefresh","value":function onPullDownRefresh(){this.componentWillMount()}},{"key":"onReachBottom","value":function onReachBottom(){1===this.state.activeTab&&s.a.eventCenter.trigger("load:goodsCommentList")}},{"key":"render","value":function render(){var e=this,t=this.state,n=t.goodsInfo,o=t.activityStatus,r=t.regimentByShare,a=t.isShowSku,s=t.isStarred,c=t.buttonType,l=void 0,b=void 0,E=void 0,C=void 0,P=void 0,O=void 0,w=n&&n.info,S="1"===this.$router.params.is_exchange,j="1"===this.$router.params.is_group_booking,x=w&&w.goods_desc,N=void 0,B=void 0;j&&n?(N="￥"+n.info.commodity_price+" 我要开团",B="￥"+n.info.shop_price+" 单独购买"):(N=S?"立即兑换":"立即购买",B="加入购物车");var D=void 0,R=void 0;if("both"===this.state.skuButtonType?(D=N,R=B):"main"===this.state.skuButtonType?(D=N,R=""):"minor"===this.state.skuButtonType?(D="",R=B):"join"===this.state.skuButtonType&&(D="确认参团",R=""),n&&w){C=w.stock>0?i.k.createElement(u.a,null,"剩余",w.stock,"件"):i.k.createElement(u.a,null,0===w.stock?"缺货":"有货");var M=n.images&&n.images.length>0?n.images.map(function(e){return i.k.createElement(p.b,{"className":"swiper-item","key":e.id},i.k.createElement(f.a,{"src":e.path,"mode":"aspectFit"}))}):i.k.createElement(p.b,{"className":"swiper-item"},i.k.createElement(f.a,{"src":n.info.goods_img,"mode":"aspectFit"}));b=i.k.createElement(p.a,{"indicatorColor":"#aaa","indicatorActiveColor":"#db2739","circular":!0,"indicatorDots":!0,"autoplay":!0},M),O="start"===o?i.k.createElement(d.a,null,i.k.createElement(u.a,{"className":"price-tip"},"秒杀价"),i.k.createElement(y.a,{"price":n.seckillTime.price,"marketPrice":n.info.market_price})):n.info.commodity_price?i.k.createElement(y.a,{"price":n.info.commodity_price,"marketPrice":n.info.shop_price||n.info.market_price}):i.k.createElement(y.a,{"price":n.info.shop_price,"marketPrice":n.info.market_price}),E=i.k.createElement(d.a,{"className":"goods-info"},i.k.createElement(d.a,{"className":"goods-name"},n.info.goods_name),i.k.createElement(d.a,{"className":"data"},S?i.k.createElement(y.a,{"price":n.info.points,"isExchange":!0}):O,i.k.createElement(d.a,{"className":"stock"},C)),i.k.createElement(d.a,{"className":"extra-benefit"},n.info.rank_integral&&i.k.createElement(d.a,null,"购买每件可获得",i.k.createElement(u.a,null,n.info.rank_integral," 经验")),n.info.expendable_integral&&i.k.createElement(d.a,null,"购买每件可获得",i.k.createElement(u.a,null,n.info.expendable_integral," 积分")))),P=S?i.k.createElement(v.a,{"type":"custom","fixed":!0,"hideNav":!0,"isButtonFill":!0,"disabled":0===w.stock,"renderLeft":i.k.createElement(ee,{"isStarred":s,"onClickStar":this.onClickStar}),"mainButton":"立即兑换","onClickMain":this.onClickMain}):j?i.k.createElement(v.a,{"type":"custom","fixed":!0,"isButtonFill":!0,"disabled":0===w.stock,"isStarred":this.state.isStarred,"renderLeft":i.k.createElement(ee,{"isStarred":s,"onClickStar":this.onClickStar}),"mainButton":N,"minorButton":B,"onClickMain":this.onClickMain,"onClickMinor":this.onClickMinor,"onClickStar":this.onClickStar}):i.k.createElement(v.a,{"type":"custom","fixed":!0,"isButtonFill":!0,"disabled":0===w.stock,"isStarred":this.state.isStarred,"mainButton":"立即购买","minorButton":"加入购物车","renderLeft":i.k.createElement(ee,{"isStarred":s,"onClickStar":this.onClickStar}),"onClickMain":this.onClickMain,"onClickMinor":this.onClickMinor,"onClickStar":this.onClickStar}),l=i.k.createElement(d.a,{"className":"main "+(j&&"group-booking")},i.k.createElement(d.a,{"className":"goods-detail__content"},b,n.seckillTime&&0===!n.seckillTime.length&&!S&&i.k.createElement(q,{"activity":n.seckillTime,"type":"secKill","onUpdatePrice":this.onUpdatePrice}),E,j&&i.k.createElement(H,{"goodsInfo":n,"regimentId":this.$router.params.regiment_id,"onShowSkuForJoin":this.onShowSkuForJoin,"regimentByShare":r}),i.k.createElement(g.a,{"icon":"choose-type","title":"请选择规格类型数量","disabled":0===w.stock,"onClick":this.showSku.bind(void 0,"goodsWithoutLeft"),"isLink":!0}),i.k.createElement(h.a,{"current":this.state.activeTab,"tabList":[{"title":"商品详情"},{"title":"商品评论"}],"onClick":this.onChangeTab,"swipeable":!1},i.k.createElement(k.a,{"current":this.state.activeTab,"index":0},x?i.k.createElement(d.a,{"className":"goods-describe"},i.k.createElement(V.a,{"nodes":x,"horizontalPadding":0})):i.k.createElement($.a,{"text":"该商品没有详情信息","mainActionType":"none"})),i.k.createElement(k.a,{"current":this.state.activeTab,"index":1},i.k.createElement(L,{"goodsId":n.info.goods_id||n.info.id}))),i.k.createElement(T,{"show":a,"goodsInfo":w,"skuList":n.skuInfo,"combination":n.products,"mainButton":D,"minorButton":R,"buttonType":c,"onHide":this.hideSku,"onClickMinor":this.onClickMinor,"onClickMain":this.onClickMain,"isExchange":S})),P)}else l=this.state.isNonExist?i.k.createElement($.a,{"type":"full","text":"该商品不存在或已下架"}):i.k.createElement(_.a,null);var G=i.k.createElement(d.a,{"className":"goods-detail"},l);return i.k.createElement(m.a,{"onRefresh":this.onPullDownRefresh&&this.onPullDownRefresh.bind(this),"ref":function ref(t){t&&(e.pullDownRefreshRef=t)}},G)}},{"key":"componentDidMount","value":function componentDidMount(){ne(GoodsDetail.prototype.__proto__||Object.getPrototypeOf(GoodsDetail.prototype),"componentDidMount",this)&&ne(GoodsDetail.prototype.__proto__||Object.getPrototypeOf(GoodsDetail.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){ne(GoodsDetail.prototype.__proto__||Object.getPrototypeOf(GoodsDetail.prototype),"componentDidShow",this)&&ne(GoodsDetail.prototype.__proto__||Object.getPrototypeOf(GoodsDetail.prototype),"componentDidShow",this).call(this),this._offReachBottom=Object(l.a)({"callback":this.onReachBottom,"ctx":this,"onReachBottomDistance":void 0}),this.pullDownRefreshRef&&this.pullDownRefreshRef.bindEvent()}},{"key":"componentDidHide","value":function componentDidHide(){ne(GoodsDetail.prototype.__proto__||Object.getPrototypeOf(GoodsDetail.prototype),"componentDidHide",this)&&ne(GoodsDetail.prototype.__proto__||Object.getPrototypeOf(GoodsDetail.prototype),"componentDidHide",this).call(this),this._offReachBottom&&this._offReachBottom(),this.pullDownRefreshRef&&this.pullDownRefreshRef.unbindEvent()}}]),GoodsDetail}()}}]);