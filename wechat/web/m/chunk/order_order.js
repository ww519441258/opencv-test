(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"271":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r,o,i=n(1),a=n(2),s=n(259),l=n(51),c=n(240),u=n.n(c),p=(n(281),n(244)),f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var d=(o=r=function(e){function Cell(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Cell);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Cell.__proto__||Object.getPrototypeOf(Cell)).call(this,e));return t.onClick=function(){var e=t.props,n=e.disabled,r=e.onClick;n||r&&r()},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Cell,a["a"].Component),f(Cell,[{"key":"render","value":function render(){var e=this.props,t=e.title,n=e.type,r=e.isExchange,o=e.isPrice,a=e.isLink,c=e.icon,u=e.disabled,f=e.value,d="cell "+(u?"disabled":a?"can-click ":""),h=void 0,m=void 0;return h="text"!==n?i.k.createElement(p.a,{"price":f,"type":n}):r?i.k.createElement(p.a,{"price":f,"isExchange":!0}):o?i.k.createElement(p.a,{"price":f}):i.k.createElement(s.a,null,f),!u&&a&&(m=i.k.createElement(s.a,{"className":"iconfont icon-right"})),i.k.createElement(l.a,{"className":d,"onClick":this.onClick},i.k.createElement(s.a,{"className":"left"},c&&i.k.createElement(s.a,{"className":"iconfont icon-"+c}),i.k.createElement(s.a,{"className":"text"},t)),i.k.createElement(l.a,null,h,this.props.children,m))}}]),Cell}(),r.options={"addGlobalClass":!0},r.defaultProps={"disabled":!1,"title":"","value":"","type":"text","isPrice":!1,"isExchange":!1,"isLink":!1},r.propTypes={"title":u.a.string.isRequired,"value":u.a.oneOfType([u.a.string,u.a.number]),"type":u.a.string,"isPrice":u.a.bool,"isExchange":u.a.bool,"isLink":u.a.bool,"disabled":u.a.bool,"onClick":u.a.func},o)},"276":function(e,t,n){var r=n(277);"string"==typeof r&&(r=[[e.i,r,""]]);var o={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};n(75)(r,o);r.locals&&(e.exports=r.locals)},"277":function(e,t,n){(e.exports=n(74)(!1)).push([e.i,"input {\n  display: block;\n  height: 1.4rem;\n  text-align: inherit;\n  text-overflow: clip;\n  overflow: hidden;\n  white-space: nowrap;\n}",""])},"281":function(e,t,n){},"284":function(e,t,n){"use strict";n(38);var r=n(1),o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function Label(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Label),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Label.__proto__||Object.getPrototypeOf(Label)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Label,r["k"].Component),o(Label,[{"key":"render","value":function render(){var e=function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(this.props,[]);return r.k.createElement("label",e,this.props.children)}}]),Label}();t.a=i},"289":function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r,o,i=n(1),a=n(2),s=n(51),l=n(258),c=n(240),u=n.n(c),p=n(10),f=n.n(p),d=(n(301),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var h=(o=r=function(e){function ActionBar(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ActionBar);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ActionBar.__proto__||Object.getPrototypeOf(ActionBar)).call(this,e));return t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ActionBar,a["a"].Component),d(ActionBar,[{"key":"render","value":function render(){var e=this.props,t=e.isButtonFill,n=e.mainButton,r=e.minorButton,o=e.disabled,a=e.disabledMain,c=e.disabledMinor,u=e.onClickMain,p=e.onClickMinor,d=e.tip,h=f()("action-bar",{"fixed":this.props.fixed,"no-fixed":this.props.noFixed,"need-margin":this.props.needMargin});return i.k.createElement(s.a,{"className":h},d&&i.k.createElement(s.a,{"className":"action-bar__tip"},d),i.k.createElement(s.a,{"className":f()("action-bar--body",{"button-list--fill":t})},i.k.createElement(s.a,{"className":"left custom-render render-left"},this.props.renderLeft),i.k.createElement(s.a,{"className":"right"},i.k.createElement(s.a,{"className":"custom-render render-right"},this.props.renderRight),i.k.createElement(s.a,{"className":"button-list"},r&&i.k.createElement(l.a,{"className":"button-minor","onClick":p,"disabled":o||d||c},r),n&&i.k.createElement(l.a,{"type":"primary","className":"purchase","onClick":u,"disabled":o||d||a},n)))))}}]),ActionBar}(),r.options={"addGlobalClass":!0},r.propTypes={"mainButton":u.a.string,"minorButton":u.a.string,"disabledMain":u.a.bool,"disabledMinor":u.a.bool,"renderLeft":u.a.node,"renderRight":u.a.node,"price":u.a.oneOfType([u.a.number,u.a.string]),"needMargin":u.a.bool,"fixed":u.a.bool,"onClickMain":u.a.func,"onClickMinor":u.a.func,"isPoints":u.a.bool,"isButtonFill":u.a.bool},r.defaultProps={"disabled":!1,"noFixed":!1,"fixed":!0,"needMargin":!1,"isButtonFill":!1,"disabledMain":!1,"disabledMinor":!1,"tip":"","onClickMain":function onClickMain(){},"onClickMinor":function onClickMinor(){}},o)},"290":function(e,t,n){"use strict";function startCountDown(e){var t=e.time,n=e.updatedCallback,r=e.endCallback,o=void 0===r?function(){}:r,i=e.delay,a=void 0===i?0:i,s=e.updateCycle,l=void 0===s?1e3:s,c=void 0,u=function update(){var e=new Date(t+a)-new Date,r=void 0,i=void 0,s=void 0,l=void 0;if(e>1e3){r=Math.floor(e/864e5);var u=e%864e5;i=Math.floor(u/36e5),u%=36e5,s=Math.floor(u/6e4),u%=6e4,l=Math.floor(u/1e3)}e>=1e3?n(r,i,s,l):(clearInterval(c),o())};return u(),c=setInterval(function(){u()},l)}n.d(t,"a",function(){return startCountDown})},"291":function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(38);var r=n(1),o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function Block(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Block),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Block.__proto__||Object.getPrototypeOf(Block)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Block,r["k"].Component),o(Block,[{"key":"render","value":function render(){return r.k.createElement("div",null,this.props.children)}}]),Block}()},"301":function(e,t,n){},"304":function(e,t,n){"use strict";n(38);var r=n(1),o=n(76),i=n(10),a=n.n(i),s=(n(276),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function getTrueType(e,t,n){if(!e)throw new Error("unexpected type");return"search"===t&&(e="search"),n&&(e="password"),"digit"===e&&(e="number"),e}var c=function(e){function Input(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Input);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Input.__proto__||Object.getPrototypeOf(Input)).apply(this,arguments));return e.onInput=e.onInput.bind(e),e.onFocus=e.onFocus.bind(e),e.onBlur=e.onBlur.bind(e),e.onKeyDown=e.onKeyDown.bind(e),e.handleComposition=e.handleComposition.bind(e),e.isOnComposition=!1,e.onInputExcuted=!1,e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Input,r["k"].Component),l(Input,[{"key":"componentDidMount","value":function componentDidMount(){"file"===this.props.type&&this.inputRef.addEventListener("change",this.onInput)}},{"key":"componentWillUnMount","value":function componentWillUnMount(){"file"===this.props.type&&this.inputRef.removeEventListener("change",this.onInput)}},{"key":"onInput","value":function onInput(e){var t=this.props,n=t.type,r=t.maxLength,o=t.confirmType,i=t.password,a=t.onInput,onInput=void 0===a?"":a,s=t.onChange,l=void 0===s?"":s;if(!this.isOnComposition&&!this.onInputExcuted){var c=e.target.value,u=getTrueType(n,o,i);if(this.onInputExcuted=!0,"number"===u&&c&&r<=c.length&&(c=c.substring(0,r),e.target.value=c),Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":c}}),!(["number","file"].indexOf(u)>=0)){var p=e.target.selectionEnd;setTimeout(function(){e.target.selectionStart=p,e.target.selectionEnd=p})}if(l)return l(e);if(onInput)return onInput(e)}}},{"key":"onFocus","value":function onFocus(e){var onFocus=this.props.onFocus;this.onInputExcuted=!1,Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onFocus&&onFocus(e)}},{"key":"onBlur","value":function onBlur(e){var onBlur=this.props.onBlur;Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onBlur&&onBlur(e)}},{"key":"onKeyDown","value":function onKeyDown(e){var t=this.props.onConfirm;this.onInputExcuted=!1,13===e.keyCode&&t&&(Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),t(e))}},{"key":"handleComposition","value":function handleComposition(e){e.target instanceof HTMLInputElement&&("compositionend"===e.type?(this.isOnComposition=!1,this.onInput(e)):this.isOnComposition=!0)}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.className,i=void 0===n?"":n,l=t.placeholder,c=t.type,u=void 0===c?"text":c,p=t.password,f=t.disabled,d=t.maxLength,h=t.confirmType,m=void 0===h?"":h,y=t.focus,b=void 0!==y&&y,g=t.value,v=a()("weui-input",i),k=Object(o.a)(this.props,["className","placeholder","disabled","max","onChange","onFocus","onBlur","type","focus"]);return"value"in this.props&&(k.value=function fixControlledValue(e){return void 0===e||null===e?"":e}(g)),r.k.createElement("input",s({"ref":function ref(t){e.inputRef=t,t&&b&&t.focus()}},k,{"className":v,"placeholder":l,"disabled":f,"maxlength":d,"onInput":this.onInput,"onFocus":this.onFocus,"onBlur":this.onBlur,"autofocus":b,"onKeyDown":this.onKeyDown,"type":getTrueType(u,m,p),"onCompositionStart":this.handleComposition,"onCompositionEnd":this.handleComposition}))}}]),Input}();c.defaultProps={"type":"text"},t.a=c},"305":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r,o,i=n(1),a=n(2),s=n(51),l=n(259),c=n(10),u=n.n(c),p=(n(319),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var f=(o=r=function(e){function AddressCell(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AddressCell);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AddressCell.__proto__||Object.getPrototypeOf(AddressCell)).call(this,e));return t.onClick=function(){t.props.disabled||t.props.onClick(t.props.address.id)},t.onEdit=function(e){t.props.onEdit(t.props.address.id),e.stopPropagation()},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AddressCell,a["a"].Component),p(AddressCell,[{"key":"render","value":function render(){var e=this.props.address,t=e.province+e.city+e.district+e.address,n=i.k.createElement(s.a,{"className":"iconfont icon-edit","onClick":this.onEdit}),r=u()("address-cell",this.props.type,{"showActive":!this.props.disabled});return i.k.createElement(s.a,{"className":r,"onClick":this.onClick},i.k.createElement(s.a,{"className":"iconfont "+(this.props.checked?"icon-check-fill":"icon-address")}),i.k.createElement(s.a,{"className":"address-cell__main"},0===e.address_id?i.k.createElement(l.a,null,"请先创建一个收货地址"):i.k.createElement(s.a,{"className":"address-cell__header"},i.k.createElement(s.a,null,i.k.createElement(l.a,{"className":"consignee"},e.consignee),1===e.status&&i.k.createElement(l.a,{"className":"badge"},"默认")),i.k.createElement(l.a,{"className":"tel"},e.tel)),i.k.createElement(s.a,{"className":"address-cell__detail"},t)),i.k.createElement(s.a,{"className":"right-button"},"display"!==this.props.type&&n,"display"===this.props.type&&!this.props.disabled&&i.k.createElement(s.a,{"className":"iconfont icon-right"})))}}]),AddressCell}(),r.options={"addGlobalClass":!0},r.defaultProps={"type":"choose","address":{},"checked":!1},o)},"317":function(e,t,n){"use strict";n.d(t,"a",function(){return setNavigationBarTitle});var r=n(0);function setNavigationBarTitle(e){var t=Object(r.l)(e);if(!t.res){var n={"errMsg":"setNavigationBarTitle"+t.msg};return console.error(n.errMsg),Promise.reject(n)}var o=e.title,i=e.success,a=e.fail,s=e.complete,l={"errMsg":"setNavigationBarTitle:ok"};return o&&"string"==typeof o?(document.title!==o&&(document.title=o),"function"==typeof i&&i(l),"function"==typeof s&&s(l),Promise.resolve(l)):(l.errMsg=Object(r.e)({"name":"setNavigationBarTitle","para":"title","correct":"String","wrong":o}),console.error(l.errMsg),"function"==typeof a&&a(l),"function"==typeof s&&s(l),Promise.reject(l))}},"318":function(e,t,n){"use strict";n(38);var r=n(1),o=n(76),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var s=function(e){function Textarea(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Textarea);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Textarea.__proto__||Object.getPrototypeOf(Textarea)).apply(this,arguments));return e.onChange=e.onChange.bind(e),e.onFocus=e.onFocus.bind(e),e.onBlur=e.onBlur.bind(e),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Textarea,r["k"].Component),a(Textarea,[{"key":"onChange","value":function onChange(e){var t=this.props,n=t.onChange,onChange=void 0===n?"":n,r=t.onInput,o=void 0===r?"":r;return Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onChange?onChange&&onChange(e):o?o&&o(e):void 0}},{"key":"onFocus","value":function onFocus(e){var onFocus=this.props.onFocus;Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onFocus&&onFocus(e)}},{"key":"onBlur","value":function onBlur(e){var onBlur=this.props.onBlur;Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onBlur&&onBlur(e)}},{"key":"render","value":function render(){var e=this.props,t=e.className,n=void 0===t?"":t,a=e.placeholder,s=void 0===a?"":a,l=e.disabled,c=e.maxlength,u=void 0===c?140:c,p=e.autoFocus,f=void 0!==p&&p;return r.k.createElement("textarea",i({},Object(o.a)(this.props,["className","placeholder","disabled","maxlength","onChange","onInput","onFocus","onBlur","autofocus"]),{"className":n,"placeholder":s,"disabled":l,"maxlength":u,"autofocus":f,"onChange":this.onChange,"onFocus":this.onFocus,"onBlur":this.onBlur}))}}]),Textarea}();t.a=s},"319":function(e,t,n){},"321":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r,o,i=n(1),a=n(2),s=n(51),l=n(259),c=n(240),u=n.n(c),p=(n(322),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var f=(o=r=function(e){function SiteCell(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SiteCell);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(SiteCell.__proto__||Object.getPrototypeOf(SiteCell)).call(this,e));return t.onClickHandle=function(){t.props.disabled||t.props.onClick(t.props.info)},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SiteCell,a["a"].Component),p(SiteCell,[{"key":"render","value":function render(){var e=this.props,t=e.info,n=e.disabled;return i.k.createElement(s.a,{"className":"site-cell "+(n?void 0:"can-click"),"onClick":this.onClickHandle},i.k.createElement(s.a,{"className":"left"},i.k.createElement(s.a,{"className":"iconfont icon-address"})),t?i.k.createElement(s.a,{"className":"main"},i.k.createElement(l.a,null,t.name),i.k.createElement(l.a,{"className":"site-cell__address"},t.address)):i.k.createElement(s.a,{"className":"main"},i.k.createElement(l.a,null,"无自提点信息")),i.k.createElement(s.a,{"className":"right"},!n&&i.k.createElement(l.a,{"className":"iconfont icon-right"})))}}]),SiteCell}(),r.options={"addGlobalClass":!0},r.defaultProps={"info":null,"disabled":!1,"onClick":function onClick(){}},r.propTypes={"info":u.a.object,"disabled":u.a.bool,"onClick":u.a.func},o)},"322":function(e,t,n){},"386":function(e,t,n){},"388":function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Array.prototype.slice,i=n(389),a=n(390),s=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=(void 0===e?"undefined":r(e))&&"object"!=(void 0===t?"undefined":r(t))?n.strict?e===t:e==t:function objEquiv(e,t,n){var l,c;if(isUndefinedOrNull(e)||isUndefinedOrNull(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=o.call(e),t=o.call(t),s(e,t,n));if(isBuffer(e)){if(!isBuffer(t))return!1;if(e.length!==t.length)return!1;for(l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}try{var u=i(e),p=i(t)}catch(e){return!1}if(u.length!=p.length)return!1;for(u.sort(),p.sort(),l=u.length-1;l>=0;l--)if(u[l]!=p[l])return!1;for(l=u.length-1;l>=0;l--)if(c=u[l],!s(e[c],t[c],n))return!1;return(void 0===e?"undefined":r(e))===(void 0===t?"undefined":r(t))}(e,t,n))};function isUndefinedOrNull(e){return null===e||void 0===e}function isBuffer(e){return!(!e||"object"!==(void 0===e?"undefined":r(e))||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},"389":function(e,t){function shim(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:shim).shim=shim},"390":function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function supported(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function unsupported(e){return e&&"object"==(void 0===e?"undefined":n(e))&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?supported:unsupported).supported=supported,t.unsupported=unsupported},"391":function(e,t,n){e.exports={"root":"index-module__root___1RtE-","formList":"index-module__formList___1ESQs","formItem":"index-module__formItem___1wqeb","content":"index-module__content___1fViz"}},"393":function(e,t,n){e.exports={"root":"index-module__root___MdnuG"}},"395":function(e,t,n){e.exports={"root":"index-module__root___3_73D"}},"397":function(e,t,n){},"399":function(e,t,n){},"401":function(e,t,n){},"403":function(e,t,n){},"533":function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(11),i=n(236),a=n(2),s=n(317),l=n(51),c=n(291),u=n(259),p=n(260),f=n(10),d=n.n(f),h=(n(386),n(77)),m=n(39),y=n(283);var b,g,v=n(329),k=n(330),_=n(284),C=n(304),O=n(318),E=n(240),w=n.n(E),j=n(388),P=n.n(j),T=n(391),x=n.n(T),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var N,R,B=(g=b=function(e){function FormBuilder(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FormBuilder);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(FormBuilder.__proto__||Object.getPrototypeOf(FormBuilder)).call(this,e));return t.tempError=null,t.detectErrors=function(){var e=[];(arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.props.content).filter(function(e){var t=e.isShow;return void 0===t||t}).forEach(function(t){var n=t.value,r=t.label,o=t.type,i=t.required,a=void 0!==i&&i,s=t.maxLength,l=t.minLength;a&&("string"!=typeof n&&"number"!=typeof n||0===n.toString().length)?e.push(r+"不能为空"):("tel"===o&&11!==n.length&&e.push(r+"必须为11位"),s&&n.length>s&&e.push(r+"不能超过"+s+"个字"),l&&n.length<l&&e.push(r+"不能少于"+l+"个字"))}),P()(t.tempError,e)||(t.tempError=e,t.props.onError(e))},t.handleFormChange=function(e,n){var r=t.props,o=r.content,i=r.onChange,a=o.map(function(t,r){return S({},t,{"value":r===e?n.detail.value:t.value})});i(a.map(function(e){return e.value}),a)},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(FormBuilder,a["a"].Component),I(FormBuilder,[{"key":"componentWillMount","value":function componentWillMount(){var e=this.props,t=e.content;(0,e.onChange)(t.map(function(e){return e.value}),t)}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){var t=e.content;this.detectErrors(t)}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.content,o=t.labelWidth;return r.k.createElement(l.a,{"className":x.a.root,"style":{"tableLayout":o?"fixed":"auto"}},r.k.createElement(l.a,{"className":x.a.formList},n.map(function(t,n){var i=t.label,a=t.type,s=t.placeholder,u=t.maxLength,p=t.value,f=t.isShow,d=void 0===f||f,h=s||"textarea"===a&&u&&"请输入"+i+"，"+u+"字以内"||"请输入"+i;return r.k.createElement(c.a,{"key":i},d&&r.k.createElement(l.a,{"className":x.a.formItem},r.k.createElement(_.a,{"style":o?{"width":o}:void 0},i),r.k.createElement(l.a,{"className":x.a.content},"input"===a&&r.k.createElement(C.a,{"maxlength":u,"placeholder":h,"value":p,"onInput":e.handleFormChange.bind(void 0,n)}),("number"===a||"tel"===a)&&r.k.createElement(C.a,{"type":"number","maxLength":"tel"===a?11:u,"placeholder":h,"value":p,"onInput":e.handleFormChange.bind(void 0,n)}),"textarea"===a&&r.k.createElement(O.a,{"placeholder":h,"autoHeight":!0,"maxlength":u,"value":p,"onInput":e.handleFormChange.bind(void 0,n)}))))})))}}]),FormBuilder}(),b.options={"addGlobalClass":!0},b.propTypes={"content":w.a.array.isRequired,"labelWidth":w.a.string,"onChange":w.a.func,"onError":w.a.func},b.defaultProps={"content":[],"layoutMode":"auto","onChange":function onChange(){},"onError":function onError(){}},g),D=n(289),F=n(265),M=n(241),A=n(244),L=n(253),G=n(393),H=n.n(G),q=n(305),W=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var $,U,V=(R=N=function(e){function HelperForTakingGoods(e){return function HelperForTakingGoods_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HelperForTakingGoods),function HelperForTakingGoods_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(HelperForTakingGoods.__proto__||Object.getPrototypeOf(HelperForTakingGoods)).call(this,e))}return function HelperForTakingGoods_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(HelperForTakingGoods,a["a"].Component),W(HelperForTakingGoods,[{"key":"render","value":function render(){var e=this.props,t=e.orderInfo,n=e.isVerification,o=e.onShowQRCode,i=t&&t.order&&1===t.order.shipping_type,a=t&&t.order&&0===t.order.shipping_type,s=t&&t.order.verifier_qrcode&&!n&&(2!==t.order.order_type||1===t.regimentInfo.regiment_status),p=Object(y.c)(t&&t.order),f=s&&(i||a)&&("待提货"===p||"待核销"===p);return r.k.createElement(l.a,{"className":H.a.root},f?r.k.createElement(c.a,null,r.k.createElement(l.a,{"className":"order-brick__minor"},r.k.createElement(l.a,{"className":"qrcode-tip"},r.k.createElement(l.a,{"className":"left"},r.k.createElement(l.a,null,"凭核销码",a?"按指定方法核销":"到指定地点自提","商品"),r.k.createElement(l.a,{"className":"small"},"（点击右侧按钮显示核销码）")),r.k.createElement(l.a,{"className":"qrcode-btn","onClick":o},r.k.createElement(u.a,{"className":"iconfont icon-qrcode"}))))):r.k.createElement(l.a,{"className":"order-brick__minor"},r.k.createElement(q.a,{"type":"display","disabled":t&&t.order&&t.order.order_status>0,"address":t&&t.order,"onClick":this.gotoAddressList})))}}]),HelperForTakingGoods}(),N.options={"addGlobalClass":!0},N.propTypes={"onShowQRCode":E.func},N.defaultProps={},R),K=n(239),Q=n(395),J=n.n(Q),z=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var X,Y,Z=(U=$=function(e){function ChooseShippingType(e){var t=this;!function ChooseShippingType_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ChooseShippingType);var n,r=function ChooseShippingType_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ChooseShippingType.__proto__||Object.getPrototypeOf(ChooseShippingType)).call(this,e));return r.onChangeShippingType=(n=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}(regeneratorRuntime.mark(function _callee(e){var n,o,i;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.props,o=n.orderInfo,i=n.onChange,o.order.shipping_type===e){t.next=6;break}return Object(K.b)({"title":"切换中"}),t.next=5,a.a.ajax({"name":"chooseShippingType","data":{"shippingType":e,"orderId":o.order.id}});case 5:i(e);case 6:case"end":return t.stop()}},_callee,t)})),function(e){return n.apply(this,arguments)}),r.state={},r}return function ChooseShippingType_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ChooseShippingType,a["a"].Component),z(ChooseShippingType,[{"key":"render","value":function render(){var e=this,t=this.props,n=t.shippingTypes,o=t.orderStatus,i=t.orderInfo;return r.k.createElement(l.a,{"className":J.a.root},r.k.createElement(l.a,{"className":"shipping-types"},n?r.k.createElement(c.a,null,r.k.createElement(l.a,null,"配送方式"),r.k.createElement(l.a,{"className":"types "+("未确认"===o&&"radio-group")},n.map(function(t){return r.k.createElement(l.a,{"key":t.id,"className":i.order.shipping_type===t.id&&"active","onClick":e.onChangeShippingType.bind(void 0,t.id)},r.k.createElement(u.a,{"className":"iconfont "+(0===t.for_fee?"icon-way-express":"icon-way-self")}),r.k.createElement(u.a,null,t.shipping_name))}))):r.k.createElement(M.a,{"type":"inline"})))}}]),ChooseShippingType}(),$.options={"addGlobalClass":!0},$.propTypes={"shippingTypes":w.a.array.isRequired,"orderInfo":w.a.object.isRequired,"orderStatus":w.a.string.isRequired,"onChange":w.a.func},$.defaultProps={},U),ee=n(271),te=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var ne,re,oe=(Y=X=function(e){function OrderCoupon(e){!function OrderCoupon_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderCoupon);var t=function OrderCoupon_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(OrderCoupon.__proto__||Object.getPrototypeOf(OrderCoupon)).call(this,e));return t.gotoChooseCoupon=function(){var e=t.props.orderInfo;a.a.navigateTo({"url":"/pages/coupon-list/coupon-list?mode=use&orderId="+e.order.id})},t.state={},t}return function OrderCoupon_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OrderCoupon,a["a"].Component),te(OrderCoupon,[{"key":"render","value":function render(){var e=(this.props.orderInfo.order||{}).remark,t=e&&e.replace(/^.*?(折扣券优惠([0-9.]+)元)?.*$/,"$2"),n=t&&(t.length>0?Number(t).toFixed(2):null);return r.k.createElement(l.a,{"className":"order-coupon"},n?r.k.createElement(ee.a,{"title":"使用优惠券","isLink":!0,"onClick":this.gotoChooseCoupon},r.k.createElement(u.a,null,"已减"),r.k.createElement(A.a,{"price":n})):r.k.createElement(ee.a,{"title":"使用优惠券","isLink":!0,"onClick":this.gotoChooseCoupon}))}}]),OrderCoupon}(),X.options={"addGlobalClass":!0},X.propTypes={"orderInfo":w.a.object.isRequired,"coupon":w.a.object,"originalOrderInfo":w.a.object,"onChange":w.a.func},X.defaultProps={"orderInfo":{},"coupon":null,"originalOrderInfo":null,"onChange":function onChange(){}},Y),ie=(n(397),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var ae,se,le=(re=ne=function(e){function DataBlock(e){!function DataBlock_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DataBlock);var t=function DataBlock_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(DataBlock.__proto__||Object.getPrototypeOf(DataBlock)).call(this,e));return t.state={},t}return function DataBlock_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(DataBlock,a["a"].Component),ie(DataBlock,[{"key":"render","value":function render(){var e=this.props,t=e.dataList,n=e.type;return r.k.createElement(l.a,{"className":"data-block"},t.map(function(e,o){return r.k.createElement(l.a,{"key":o,"className":d()({"total-table":"price"===n||"points"===n,"total-row":o===t.length-1})},!e.hidden&&(e.warning?r.k.createElement(ee.a,{"title":e.title},r.k.createElement(l.a,{"className":"warning"},r.k.createElement(u.a,{"className":"iconfont icon-warning"}),r.k.createElement(u.a,null,"不支持配送"))):e.description?r.k.createElement(ee.a,{"title":e.title},r.k.createElement(l.a,{"className":"description"},e.description)):r.k.createElement(ee.a,{"title":e.title,"value":e.value,"isPrice":"price"===n,"isExchange":"points"===n||"points"===e.type,"type":e.type||n})))}))}}]),DataBlock}(),ne.options={"addGlobalClass":!0},ne.defaultProps={"dataList":[],"type":"text"},ne.propTypes={"dataList":w.a.array.isRequired,"type":w.a.oneOf(["text","price","points"])},re),ce=n(258),ue=n(275),pe=(n(399),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var fe,de,he,me=(se=ae=function(e){function Regiment(e){!function Regiment_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Regiment);var t=function Regiment_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Regiment.__proto__||Object.getPrototypeOf(Regiment)).call(this,e));return t.switchShareTip=function(){"WEB"===a.a.getEnv()&&t.setState({"isShowShareTip":!t.state.isShowShareTip})},t.state={"isShowShareTip":!1},t}return function Regiment_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Regiment,a["a"].Component),pe(Regiment,[{"key":"render","value":function render(){var e=this.props.regimentInfo,t=this.state.isShowShareTip,n=e.member_avatar,o=null===e.regiment_end_date?"待付款":["进行中","已完成","失败"][e.regiment_status],i="进行中"===o;return r.k.createElement(l.a,{"className":"regiment"},r.k.createElement(l.a,{"className":"status"},r.k.createElement(l.a,{"className":"regiment-status"},"拼团",o),e.lack_people>0&&r.k.createElement(l.a,{"className":"number"},r.k.createElement(l.a,{"className":"regiment__tip"},r.k.createElement(l.a,null,"还差",e.lack_people,"人拼满"),r.k.createElement(l.a,{"className":"regular-tip"},"(付款后才计入团内)")),i&&r.k.createElement(ce.a,{"type":"primary","openType":"share","size":"mini","className":"iconfont icon-share regiment__share","onClick":this.switchShareTip},"分享此团"))),r.k.createElement(l.a,{"className":"title"},"拼团成员"),r.k.createElement(l.a,{"className":"member__list"},n.map(function(e,t){return r.k.createElement(ue.a,{"key":t,"mode":"aspectFit","src":e.avatar||e})}),Object.keys(Array.from({"length":e.lack_people})).map(function(e,t){return r.k.createElement(u.a,{"key":t,"className":"iconfont icon-placeholder"})})),t&&r.k.createElement(l.a,{"className":"shade shade-share","onClick":this.switchShareTip},r.k.createElement(u.a,{"className":"tip-text"},"点击右上角分享拼团给好友或朋友圈"),r.k.createElement(u.a,{"className":"iconfont icon-menu-arrow"})))}}]),Regiment}(),ae.options={"addGlobalClass":!0},ae.defaultProps={"regimentInfo":{}},ae.propTypes={"regimentInfo":w.a.object.isRequired},se),ye=(n(401),n(290)),be=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var ge,ve,ke=(de=fe=function(e){function Header(e){!function Header_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Header);var t=function Header_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Header.__proto__||Object.getPrototypeOf(Header)).call(this,e));return he.call(t),t.timer=null,t.state={"dueTime":null},t}return function Header_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Header,a["a"].Component),be(Header,[{"key":"componentWillMount","value":function componentWillMount(){this.refreshCountdown()}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){this.refreshCountdown(e)}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.timer&&clearInterval(this.timer)}},{"key":"render","value":function render(){var e=this.props,t=e.orderStatus,n=e.orderStatusText,o=e.orderType,i={"未确认":"warning","待付款":"pay","待发货":"will-deliver","待收货":"express","待提货":"will-deliver","已完成":"finish","已取消":"close"}[t],a=void 0;a="拼团订单"===o?"未拼满自动退款":"待付款"===t?"自动取消订单":"自动确认收货";var s=this.state.dueTime&&r.k.createElement(l.a,{"className":"time"},r.k.createElement(l.a,null,r.k.createElement(u.a,null,"剩余"),r.k.createElement(u.a,null,this.state.dueTime)),r.k.createElement(l.a,null,r.k.createElement(u.a,{"className":"tip-type"},a)));return r.k.createElement(l.a,{"className":"order-header"},r.k.createElement(l.a,{"className":"status"},r.k.createElement(u.a,{"className":"iconfont icon-"+i}),r.k.createElement(u.a,null,n)),s)}}]),Header}(),fe.options={"addGlobalClass":!0},fe.propTypes={"orderInfo":w.a.object,"orderStatus":w.a.string.isRequired,"orderStatusText":w.a.string.isRequired,"orderType":w.a.string.isRequired},fe.defaultProps={"orderInfo":{}},he=function _initialiseProps(){var e=this;this.refreshCountdown=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props,n=t.orderInfo,r=t.orderStatus;if(e.timer&&clearInterval(e.timer),e.setState({"dueTime":null}),n){var o="待"===r.charAt(0);if(1===n.order.order_status&&2===n.order.order_type&&0===n.regimentInfo.regiment_status){var i=n.regimentInfo.regiment_end_date;i&&e.startCountDown(1e3*i)}else o&&n.order.dueTime&&e.startCountDown(1e3*n.order.dueTime)}},this.startCountDown=function(t){e.timer&&clearInterval(e.timer),e.timer=Object(ye.a)({"time":t,"updateCycle":60,"updatedCallback":function updatedCallback(t,n,r){var o="";t>0&&(o+=t+" 天 "),n>0&&(o+=n+" 小时 "),e.setState({"dueTime":" "+o+r+" 分钟"})}})}},de),_e=(n(403),n(321)),Ce=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var Oe,Ee=(ve=ge=function(e){function Brick(e){!function Brick_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Brick);var t=function Brick_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Brick.__proto__||Object.getPrototypeOf(Brick)).call(this,e));return t.gotoChooseSite=function(){a.a.navigateTo({"url":"/pages/choose-self-pick-up-site/choose-self-pick-up-site"})},t.gotoAddressList=function(){var e=t.props.orderInfo;if(!t.props.disabled){var n=e.order;0===n.address_id?a.a.navigateTo({"url":"../edit-address/edit-address?choose="+n.id}):a.a.navigateTo({"url":"../address-list/address-list?choose="+n.id+"&current="+n.address_id})}},t}return function Brick_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Brick,a["a"].Component),Ce(Brick,[{"key":"render","value":function render(){var e=this.props,t=e.orderInfo,n=e.orderStatus,o=e.onShowExpress,i=t.order||{},a=void 0,s=void 0,c=1===i.shipping_type,u=["withoutShipping","selfTaking","express"][i.shipping_type];return t.express&&t.express.length>0&&(s=r.k.createElement(l.a,{"className":"express-cell","onClick":o},r.k.createElement(l.a,{"className":"left"},r.k.createElement(l.a,{"className":"iconfont icon-express"}),r.k.createElement(l.a,{"className":"main"},r.k.createElement(l.a,{"className":"station"},t.express[0].AcceptStation),r.k.createElement(l.a,{"className":"time"},t.express[0].AcceptTime))),r.k.createElement(l.a,{"className":"iconfont icon-right"}))),t.express&&t.express.length>0?a=r.k.createElement(l.a,null,s):c?a=r.k.createElement(l.a,null,t.order.picking_site&&t.order.picking_site.id?r.k.createElement(_e.a,{"info":t.order.picking_site,"disabled":"未确认"!==n,"onClick":this.gotoChooseSite}):r.k.createElement(ee.a,{"title":"未确认"===n?"选择自提点":"没有设置自提点","isLink":!0,"onClick":this.gotoChooseSite})):"withoutShipping"===u?a=r.k.createElement(l.a,null,r.k.createElement(l.a,{"className":"tip-cell"},"支付后请参照商品详情页说明或者寻找客服按照指定方法核销，点击虚拟商品右侧二维码图标显示核销码 （多个商品可左右滑动来浏览）")):t.order&&(a=r.k.createElement(l.a,null,r.k.createElement(q.a,{"type":"display","disabled":t.order.order_status>0,"address":t.order,"onClick":this.gotoAddressList}))),r.k.createElement(l.a,{"className":"order-brick"},r.k.createElement(l.a,{"className":"brick"},a))}}]),Brick}(),ge.options={"addGlobalClass":!0},ge.defaultProps={"orderInfo":{},"orderStatus":"","onShowExpress":function onShowExpress(){},"isVerification":!1},ge.propTypes={"orderInfo":w.a.object.isRequired,"orderStatus":w.a.string.isRequired,"onShowExpress":w.a.func.isRequired,"isVerification":w.a.bool},ve),we=(Oe=get_order_info_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,n,r,o,l,c,u,p;return regeneratorRuntime.wrap(function _callee3$(f){for(;;)switch(f.prev=f.next){case 0:return t=this.state,n=t.orderInfo,r=t.coupon,o=this.$router.params.id,l=n&&n.order.id||o,e&&this.setState({"orderInfo":null}),f.prev=4,f.next=7,a.a.ajax({"name":"getOrderDetail","data":{"id":l}});case 7:return c=f.sent,this.originalOrderInfo=JSON.parse(JSON.stringify(c)),e&&c.userMsg.name&&this.setState({"name":c.userMsg.name,"tel":c.userMsg.mobile}),0!==c.order.order_status||c.order.picking_site||(c.order.picking_site=c.pickingSite),0!==c.order.order_status||this.state.shippingTypes||getShippingTypes.bind(this)(),r&&0===c.order.order_status&&(c.order=Object.assign(c.order,this.handleCoupon(r))),this.setState({"orderInfo":c}),u=Object(y.c)(c.order),(p=a.a.getCurrentPages())&&"pages/order/order"===p[p.length-1].route&&("未确认"===Object(y.c)(c.order)?Object(s.a)({"title":"确认订单"}):Object(s.a)({"title":"订单详情"})),2!==c.order.order_type||"待发货"!==u&&"待收货"!==u&&"已完成"!==u?Object(i.d)():Object(i.h)(),"WEB"===a.a.getEnv()&&2===c.order.order_type&&Object(m.d)(Object(m.a)(c)),Object(K.a)(),f.abrupt("return",c);case 23:f.prev=23,f.t0=f.catch(4),Object(K.a)();case 26:case"end":return f.stop()}},_callee3,this,[[4,23]])})),function getOrderInfo(e){return Oe.apply(this,arguments)});function get_order_info_asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}var je,Pe=function(){var e=get_order_info_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=this.$router.params.scene)){n.next=5;break}return n.abrupt("return",Te.bind(this)(t));case 5:return n.abrupt("return",we.bind(this)(e));case 6:case"end":return n.stop()}},_callee,this)}));return function getInfo(t){return e.apply(this,arguments)}}(),Te=(je=get_order_info_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t=this;return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(h.b)({"name":"getVerifyInfo","data":{"orderId":e},"success":function success(e){t.setState({"orderInfo":e})},"fail":function fail(e){t.setState({"tip":e.data.info})},"hideToast":!0}));case 1:case"end":return n.stop()}},_callee2,this)})),function getOrderInfoForVerifying(e){return je.apply(this,arguments)});function getShippingTypes(){var e=this;return Object(h.b)({"name":"getShippingTypes","success":function success(t){e.setState({"shippingTypes":t})}})}n.d(t,"default",function(){return Re});var xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ie=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),Ne=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(n):void 0};function order_asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}var Re=function(e){function Order(e){var t=this;!function order_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Order);var n,r=function order_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Order.__proto__||Object.getPrototypeOf(Order)).call(this,e));return r.config={"navigationBarTitleText":"订单详情"},r.getData=(n=order_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Pe.bind(r)(e));case 1:case"end":return t.stop()}},_callee,t)})),function(e){return n.apply(this,arguments)}),r.verify=order_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e;return regeneratorRuntime.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return e=r.state.orderInfo,t.next=3,Object(h.b)({"name":"verifyOrder","data":{"orderId":e.order.id},"hintText":"核销"});case 3:e.order.order_status=6,r.setState({"orderInfo":e});case 5:case"end":return t.stop()}},_callee2,t)})),r.handleClickActionButton=function(e){var t=r.state,n=t.orderInfo,o=t.coupon,i=t.name,a=t.tel,s=t.postscript,l=Object(v.a)(n&&n.order),c="main"===e?l.mainAction:l.minorAction;c&&c(n.order,{"coupon":o,"name":i,"tel":a,"postscript":s})},r.handleUserInfoChange=function(e){var t=Se(e,3),n=t[0],o=t[1],i=t[2];r.setState({"name":n,"tel":o,"postscript":i})},r.handleUserInfoError=function(e){r.setState({"userInfoError":e[0]||""})},r.handleCouponChange=function(e,t){r.setState({"orderInfo":e,"coupon":t}),Object(o.e)("coupon",t)},r.handleClickExpressCell=function(){Object(k.j)(r.state.orderInfo.order)},r.handleClickShowQRCode=function(){Object(k.i)(r.state.orderInfo.order)},r.originalOrderInfo=null,r.state={"orderInfo":null,"name":"","tel":"","postscript":"","shippingTypes":null,"tip":"","coupon":null,"userInfoError":""},r}return function order_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Order,a["a"].Component),Ie(Order,[{"key":"componentWillMount","value":function componentWillMount(){var e=this,t=this.$router.params.id;Object(i.d)(),this.config=Object(o.c)("config"),this.getData(!0),a.a.eventCenter.on("update:order",function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)if(t.pickingSite){var r=e.state.orderInfo;r.order.picking_site=t.pickingSite,e.setState({"orderInfo":r})}else e.setState(t);n&&void 0!==t||e.getData(!0,{})}),a.a.eventCenter.on("updateAndPay:"+t,order_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var t,n,r;return regeneratorRuntime.wrap(function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.getData();case 2:t=o.sent,n=Object(v.a)(t&&t.order),(r=n.mainAction)&&r(t.order);case 6:case"end":return o.stop()}},_callee3,e)})))}},{"key":"onPullDownRefresh","value":function onPullDownRefresh(){this.getData()}},{"key":"componentDidShow","value":function componentDidShow(){var e=this.state.orderInfo;e?"未确认"===Object(y.c)(e.order)?Object(s.a)({"title":"确认订单"}):Object(s.a)({"title":"订单详情"}):"1"===this.$router.params.is_confirm&&Object(s.a)({"title":"确认订单"}),this.pullDownRefreshRef&&this.pullDownRefreshRef.bindEvent()}},{"key":"onShareAppMessage","value":function onShareAppMessage(){var e=this.state.orderInfo;return e?Object(m.a)(e):null}},{"key":"render","value":function render(){var e=this,t=this.state,n=t.orderInfo,o=t.coupon,i=t.shippingTypes,s=t.tip,f=t.name,h=t.tel,m=t.postscript,b=t.userInfoError,g="1"===this.$router.params.is_exchange,k=this.$router.params.scene,_="未知",C="",O=n&&Object(y.a)(n.order),E=Object(v.a)(n&&n.order),w=function getDetailData(e){if(!e)return null;var t=Object(y.c)(e),n=Object(y.a)(e),r=[{"title":"订单号","value":e.order.order_sn},{"title":"订单状态","value":t},{"title":"订单类型","value":n},{"title":"下单时间","value":e.order.created_at},{"title":"支付时间","value":e.order.pay_at}];return"未确认"!==t&&(r=r.concat([{"title":"配送类型","value":1===e.order.shipping_type?"门店自提":"快递配送"},{"title":"联系人","value":e.order.consignee},{"title":"手机号码","value":e.order.tel},{"title":"备注","value":e.order.postscript||"无"}])),e.order.pay_status>0&&r.push({"title":"支付方式","value":Object(y.b)(e.order)}),e.order.totalExp&&r.push({"title":"获得经验","value":e.order.totalExp,"type":"exp"}),e.order.totalPoint&&r.push({"title":"获得积分","value":e.order.totalPoint,"type":"points"}),r}(n),j=[],P=n&&n.goodsInfo,T=void 0;if(n&&(_=Object(y.c)(n&&n.order),g=4===n.order.order_type,j=function getPriceData(e){if(!e)return null;var t=e&&Object(y.a)(e.order);return[{"title":"商品金额","value":e.order.goods_fee},{"title":"运费","value":e.order.shipping_fee,"warning":-1===Number(e.order.shipping_fee)&&"不支持配送","hidden":"积分兑换订单"===t},{"title":"优惠","value":-1*e.order.discount_money,"hidden":e.order.discount_money<=0},{"title":"","description":e.order.remark,"hidden":e.order.discount_money<=0},{"title":"总计","value":e.order.pay_fee}]}(n),"未确认"===_&&(1!==n.order.shipping_type||n.order.picking_site&&n.order.picking_site.id?2===n.order.shipping_type&&0===n.order.address_id?C="请先创建一个收货地址":2!==n.order.shipping_type||n.order.address_id>0?-1===Number(n.order.shipping_fee)&&(C="当前地址不支持配送"):C="请选择一个收货地址":C="请选择自提点"),"拼团订单"===O?P=n.goodsInfo.map(function(e){return xe({},e,{"groupbooking_id":n.regimentInfo.groupbooking_id,"regiment_id":n.order.regiment_id})}):g&&(P=n.goodsInfo.map(function(e){return xe({},e,{"points":n.order.pay_fee})}))),n){var x=[{"isShow":0===n.order.shipping_type||1===n.order.shipping_type,"label":"联系人","type":"input","value":f,"required":!0,"maxLength":5,"minLength":2},{"isShow":0===n.order.shipping_type||1===n.order.shipping_type,"label":"手机号码","type":"tel","value":h,"required":!0},{"label":"备注","type":"textarea","value":m,"maxLength":50}];T=r.k.createElement(l.a,{"className":"main-content"},r.k.createElement(ke,{"orderInfo":n,"orderType":O,"orderStatus":_,"orderStatusText":_}),r.k.createElement(Ee,{"orderInfo":n,"orderStatus":_,"isVerification":k,"onShowExpress":this.handleClickExpressCell}),("待收货"===_||"待提货"===_)&&r.k.createElement(V,{"orderInfo":n,"isVerification":k,"onShowQRCode":this.handleClickShowQRCode}),"未确认"===_&&r.k.createElement(B,{"content":x,"labelWidth":a.a.pxTransform(150),"onChange":this.handleUserInfoChange,"onError":this.handleUserInfoError}),r.k.createElement(l.a,{"className":"order-goods-list"},P.map(function(e){return r.k.createElement(F.a,{"goods":e,"key":e.id,"isExchange":g})})),"拼团订单"===O&&n.regimentInfo&&r.k.createElement(me,{"regimentInfo":n.regimentInfo}),"未确认"===_&&0!==n.order.shipping_type&&r.k.createElement(Z,{"shippingTypes":i,"orderInfo":n,"orderStatus":_,"onChange":this.getData}),"普通订单"===O&&"未确认"===_&&r.k.createElement(oe,{"orderInfo":n,"coupon":o,"originalOrderInfo":this.originalOrderInfo,"onChange":this.handleCouponChange}),r.k.createElement(le,{"dataList":j,"type":g?"points":"price"}),r.k.createElement(le,{"dataList":w}))}else T=s?r.k.createElement(L.a,{"icon":"unhappy","text":s,"mainActionType":"home","mainAction":"返回首页"}):r.k.createElement(M.a,null);var S=r.k.createElement(l.a,{"className":d()("order",{"display-action-bar":E||k&&"待提货"===_})},T,k&&"待提货"===_?r.k.createElement(D.a,{"fixed":!0,"mainButton":"核销订单","onClickMain":this.verify}):r.k.createElement(c.a,null,!k&&E&&r.k.createElement(D.a,{"fixed":!0,"mainButton":E.mainButton,"minorButton":E.minorButton,"onClickMain":this.handleClickActionButton.bind(void 0,"main"),"onClickMinor":this.handleClickActionButton.bind(void 0,"minor"),"renderRight":r.k.createElement(l.a,{"className":"action-bar__price"},("未确认"===_||"待付款"===_)&&r.k.createElement(c.a,null,r.k.createElement(u.a,{"className":"积分兑换订单"===O?"point":"price"},"总计"),r.k.createElement(A.a,{"price":n.order.pay_fee,"isExchange":g}))),"tip":C||b,"disabled":"未确认"===_&&null===i||C})));return r.k.createElement(p.a,{"onRefresh":this.onPullDownRefresh&&this.onPullDownRefresh.bind(this),"ref":function ref(t){t&&(e.pullDownRefreshRef=t)}},S)}},{"key":"componentDidMount","value":function componentDidMount(){Ne(Order.prototype.__proto__||Object.getPrototypeOf(Order.prototype),"componentDidMount",this)&&Ne(Order.prototype.__proto__||Object.getPrototypeOf(Order.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){Ne(Order.prototype.__proto__||Object.getPrototypeOf(Order.prototype),"componentDidHide",this)&&Ne(Order.prototype.__proto__||Object.getPrototypeOf(Order.prototype),"componentDidHide",this).call(this),this.pullDownRefreshRef&&this.pullDownRefreshRef.unbindEvent()}}]),Order}()}}]);