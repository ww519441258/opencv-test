(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"244":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r,a,o=n(1),i=n(2),s=n(259),c=n(51),l=n(240),p=n.n(l),u=(n(256),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var f=(a=r=function(e){function Price(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Price),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Price.__proto__||Object.getPrototypeOf(Price)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Price,i["a"].Component),u(Price,[{"key":"render","value":function render(){var e=this.props,t=e.price,n=e.marketPrice,r=e.center,a=e.isExchange,i=t>0?Math.floor(t):Math.ceil(t),l=parseFloat(t).toFixed(2).toString().replace(/-?[0-9]*(\.?[0-9]*)/g,"$1"),p=parseFloat(n).toFixed(2),u=this.props.type,f=void 0;a&&(u="points");var m="price"===u;return f="price"===u?o.k.createElement(s.a,null,"￥"):"points"===u?o.k.createElement(s.a,{"className":"iconfont icon-point"}):o.k.createElement(s.a,{"className":"iconfont icon-exp"}),o.k.createElement(c.a,{"className":"price "+(r?"price-center":"")},o.k.createElement(s.a,{"className":"price__main price--"+u},f,o.k.createElement(s.a,{"className":"price__int"},i),m&&o.k.createElement(s.a,{"className":"price__dec"},l)),p>0&&o.k.createElement(s.a,{"className":"price__market-price"},"￥",p))}}]),Price}(),r.options={"addGlobalClass":!0},r.defaultProps={"price":0,"marketPrice":NaN,"isExchange":!1,"type":"price"},a);f.propTypes={"price":p.a.oneOfType([p.a.number,p.a.string]).isRequired,"marketPrice":p.a.oneOfType([p.a.number,p.a.string]),"isExchange":p.a.bool,"type":p.a.oneOf(["price","points","exp"])}},"256":function(e,t,n){},"362":function(e,t,n){},"364":function(e,t,n){},"366":function(e,t,n){},"538":function(e,t,n){"use strict";n.r(t);var r,a,o=n(1),i=n(11),s=n(2),c=n(237),l=n(291),p=n(51),u=n(259),f=n(260),m=(n(362),n(77)),d=n(244),b=n(288),y=n(275),h=n(240),k=n.n(h),_=(n(364),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var v,g,E=(a=r=function(e){function UserInfo(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserInfo);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(UserInfo.__proto__||Object.getPrototypeOf(UserInfo)).call(this,e));return t.gotoRankInfo=function(){s.a.navigateTo({"url":"/pages/rank-info/rank-info"})},t.gotoSetting=function(e){e.stopPropagation(),s.a.navigateTo({"url":"/pages/about/about"})},t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(UserInfo,s["a"].Component),_(UserInfo,[{"key":"render","value":function render(){var e=this.props.userInfo||{},t=e.avatar,n=e.nickname,r=e.rankid,a=e.nextRank,i=e.member_sn,c=e.tier_points,l=void 0,f=void 0,m=void 0,d=void 0,h=void 0,k="WEAPP"===s.a.getEnv();if(l=k?o.k.createElement(b.a,{"type":"userAvatarUrl","className":"avatar"}):t?o.k.createElement(y.a,{"src":t,"className":"avatar"}):o.k.createElement(p.a,{"className":"avatar-placeholder"}),r&&(f=o.k.createElement(u.a,{"className":"rank-tag"},r.rank_name)),a){var _=a.tier_points-c,v=c/a.tier_points*100;m=o.k.createElement(p.a,{"className":"rank-progress"},o.k.createElement(p.a,{"className":"rank-progress__inner","style":{"width":v+"%"}})),d=o.k.createElement(p.a,{"className":"rank-next"},"还差",o.k.createElement(u.a,{"className":"points"},_),"经验升级到",o.k.createElement(u.a,{"className":"rank-name"}," ",a.rank_name)),h=o.k.createElement(p.a,{"className":"current-exp"},"当前经验值:",o.k.createElement(u.a,{"className":"points"},c))}return o.k.createElement(p.a,{"className":"user-info","onClick":this.gotoRankInfo},o.k.createElement(p.a,{"className":"left"},o.k.createElement(p.a,null,l),o.k.createElement(p.a,{"className":"user-cell__data"},o.k.createElement(p.a,{"className":"nickname"},k?o.k.createElement(b.a,{"type":"userNickName"}):o.k.createElement(u.a,null,n||"无法获取昵称"),f),m,h,d,i&&o.k.createElement(p.a,{"className":"member-sn"},"会员编号：",o.k.createElement(u.a,{"className":"sn"},i)))),o.k.createElement(p.a,{"className":"right"},o.k.createElement(p.a,{"className":"iconfont icon-about","hoverStopPropagation":!0,"onClick":this.gotoSetting})))}}]),UserInfo}(),r.options={"addGlobalClass":!0},r.defaultProps={"userInfo":{}},r.propTypes={"userInfo":k.a.object},a),C=n(258),P=(n(366),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var O=(g=v=function(e){function ServiceCard(e){!function ServiceCard_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ServiceCard);var t=function ServiceCard_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ServiceCard.__proto__||Object.getPrototypeOf(ServiceCard)).call(this,e));return t.goto=function(e,t){if(!0===(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return!1;var n=t?"?"+t:"";e.includes("/")?s.a.navigateTo({"url":"/pages/"+e+n}):s.a.navigateTo({"url":"/pages/"+e+"/"+e+n})},t.state={},t}return function ServiceCard_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ServiceCard,s["a"].Component),P(ServiceCard,[{"key":"render","value":function render(){var e=this.props,t=e.icon,n=e.title,r=e.url,a=e.openType,i=(e.disabled,void 0);return i=a&&"WEB"===s.a.getEnv()?o.k.createElement(p.a,null):"customer-service"===a?o.k.createElement(C.a,{"openType":"contact","className":"service-card service-card--open-data"},o.k.createElement(u.a,{"className":"iconfont icon-"+t}),o.k.createElement(u.a,{"className":"service__title"},n)):o.k.createElement(p.a,{"className":"service-card","onClick":this.goto.bind(void 0,r)},o.k.createElement(u.a,{"className":"iconfont icon-"+t}),o.k.createElement(u.a,{"className":"service__title"},n)),o.k.createElement(p.a,null,i)}}]),ServiceCard}(),v.options={"addGlobalClass":!0},v.defaultProps={"disabled":!1},v.propTypes={"icon":k.a.string,"title":k.a.string,"url":k.a.string,"openType":k.a.string,"disabled":k.a.bool},g);n.d(t,"default",function(){return j});var N=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),w=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0};var j=function(e){function UserCenter(e){!function user_center_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserCenter);var t=function user_center_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(UserCenter.__proto__||Object.getPrototypeOf(UserCenter)).call(this,e));return t.config={"navigationBarTitleText":"个人中心"},t.getUserInfo=function(){Object(m.b)({"name":"getUserInfo","success":function success(e){t.setState({"userInfo":e})}}),Object(m.b)({"name":"getOrdersCount","success":function success(e){t.setState({"ordersCount":e})}})},t.getConfig=function(){t.config=Object(i.c)("config")},t.goto=function(e,t){if(!0===(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return!1;var n=t?"?"+t:"";e.includes("/")?s.a.navigateTo({"url":"/pages/"+e+n}):s.a.navigateTo({"url":"/pages/"+e+"/"+e+n})},t.gotoOrderType=function(e){"afterSales"===e?s.a.navigateTo({"url":"/pages/after-sales/after-sales"}):s.a.navigateTo({"url":"/pages/order-list/order-list?type="+e})},t.state={"userInfo":null,"ordersCount":null},t}return function user_center_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(UserCenter,s["a"].Component),N(UserCenter,[{"key":"componentWillMount","value":function componentWillMount(){var e=this;this.getConfig(),this.getUserInfo(),s.a.eventCenter.on("update:config",function(){e.getConfig()}),s.a.eventCenter.on("update:userCenter",function(){e.getUserInfo()}),Object(c.a)()}},{"key":"onShareAppMessage","value":function onShareAppMessage(){}},{"key":"onPullDownRefresh","value":function onPullDownRefresh(){this.componentWillMount()}},{"key":"render","value":function render(){var e=this,t=this.state,n=t.userInfo,r=t.ordersCount,a=this.config,i=a.balancesEnabled,c=a.distributionEnabled,m=a.exchangeEnabled,b="WEAPP"===s.a.getEnv(),y=void 0,h=[{"icon":"pay","title":"待付款","type":1,"quantity":r&&r.unpaied},{"icon":"express","title":"待收货","type":2,"quantity":r&&parseInt(r.unshipping)+parseInt(r.shipping)},{"icon":"finish","title":"已完成","type":3,"quantity":r&&r.finish},{"icon":"refund","title":"退款","type":4,"quantity":r&&r.refund},{"icon":"after-sales","title":"售后服务","type":"afterSales"}],k=[{"icon":"address","title":"管理收货地址","url":"address-list"},{"icon":"order","title":"分销中心","url":"distribution/index","disabled":0===c},{"icon":"star","title":"我的收藏","url":"starred-goods"},{"icon":"points-shop","title":"积分商城","url":"points-shop","disabled":0===m}],_=k.map(function(e,t){return o.k.createElement(l.a,{"key":t},!e.disabled&&o.k.createElement(O,{"icon":e.icon,"title":e.title,"url":e.url,"openType":e.openType,"disabled":e.disabled}))}),v=h.map(function(t){return o.k.createElement(p.a,{"key":t.icon,"className":"block__item","onClick":e.gotoOrderType.bind(e,t.type)},o.k.createElement(u.a,{"className":"iconfont icon-"+t.icon}),o.k.createElement(u.a,{"className":"order-type--name"},t.title),t.quantity>0&&o.k.createElement(u.a,{"className":"order-quantity"},t.quantity))});"WEAPP"===s.a.getEnv()&&k.push({"openType":"customer-service","icon":"customer-service","title":"客户服务"}),n&&(y=[{"name":"积分","value":n.pay_points,"url":"logs-table","params":"type=point"},{"name":"优惠券","value":n.received_quantity||0,"url":"own-coupon"},{"name":"余额","value":n.balance,"url":"logs-table","params":"type=balance","disabled":!i}].map(function(t,n){return o.k.createElement(p.a,{"key":n,"className":"asset__card "+(t.disabled?"asset__card--disabled":""),"onClick":e.goto.bind(void 0,t.url,t.params,t.disabled)},o.k.createElement(p.a,{"className":"asset__data"},t.disabled?o.k.createElement(p.a,{"className":"asset__unopened"},"未开启"):"积分"===t.name?o.k.createElement(d.a,{"price":t.value,"isExchange":!0}):"余额"===t.name?o.k.createElement(d.a,{"price":t.value}):o.k.createElement(p.a,{"className":"asset__number"},t.value)),o.k.createElement(p.a,{"className":"asset__name"},t.name))}));var g=o.k.createElement(p.a,{"className":"user-center"},(b||n)&&o.k.createElement(E,{"userInfo":n}),o.k.createElement(p.a,{"className":"block"},o.k.createElement(p.a,{"className":"block__header"},o.k.createElement(u.a,{"className":"block__title"},"我的订单"),o.k.createElement(u.a,{"className":"all","onClick":this.goto.bind(void 0,"order-list")},"查看全部订单>")),o.k.createElement(p.a,{"className":"block__content"},v)),o.k.createElement(p.a,{"className":"asset"},o.k.createElement(p.a,{"className":"asset__content"},y),o.k.createElement(p.a,{"className":"asset__right "+(i?"":"disabled"),"onClick":this.goto.bind(void 0,"recharge","",!i)},o.k.createElement(p.a,{"className":"iconfont icon-pay"}),o.k.createElement(p.a,{"className":"text"},"余额充值"))),o.k.createElement(p.a,{"className":"service"},_));return o.k.createElement(f.a,{"onRefresh":this.onPullDownRefresh&&this.onPullDownRefresh.bind(this),"ref":function ref(t){t&&(e.pullDownRefreshRef=t)}},g)}},{"key":"componentDidMount","value":function componentDidMount(){w(UserCenter.prototype.__proto__||Object.getPrototypeOf(UserCenter.prototype),"componentDidMount",this)&&w(UserCenter.prototype.__proto__||Object.getPrototypeOf(UserCenter.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){w(UserCenter.prototype.__proto__||Object.getPrototypeOf(UserCenter.prototype),"componentDidShow",this)&&w(UserCenter.prototype.__proto__||Object.getPrototypeOf(UserCenter.prototype),"componentDidShow",this).call(this),this.pullDownRefreshRef&&this.pullDownRefreshRef.bindEvent()}},{"key":"componentDidHide","value":function componentDidHide(){w(UserCenter.prototype.__proto__||Object.getPrototypeOf(UserCenter.prototype),"componentDidHide",this)&&w(UserCenter.prototype.__proto__||Object.getPrototypeOf(UserCenter.prototype),"componentDidHide",this).call(this),this.pullDownRefreshRef&&this.pullDownRefreshRef.unbindEvent()}}]),UserCenter}()}}]);