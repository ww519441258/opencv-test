"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp2,_createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(n):void 0},_index=require("../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_ajax=require("../../utils/ajax.js"),_ajax2=_interopRequireDefault(_ajax),_globalData=require("../../utils/global-data.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var AddressList=(_temp2=_class=function(e){function s(){var e,t,r;_classCallCheck(this,s);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=r=_possibleConstructorReturn(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(a)))).$usedState=["loopArray10","$compid__54","addressList","__fn_on"],r.config={navigationBarTitleText:"选择收货地址"},r.onEdit=function(t){(0,_globalData.setGlobalData)("address",r.state.addressList.find(function(e){return e.id===t})),r.$router.params.choose?_index2.default.navigateTo({url:"../edit-address/edit-address?choose="+r.$router.params.choose}):_index2.default.navigateTo({url:"../edit-address/edit-address"})},r.onAdd=function(){(0,_globalData.setGlobalData)("address",null),_index2.default.navigateTo({url:"../edit-address/edit-address"})},r.onClick=function(e){var t=r.$router.params;t.choose&&(t.current==e?_index2.default.navigateBack():(0,_ajax2.default)({name:"chooseAddress",data:{id:e,orderId:r.$router.params.choose},success:function(){_index2.default.eventCenter.trigger("update:order"),_index2.default.navigateBack()}}))},r.customComponents=["AddressCell","Tip","Loading"],_possibleConstructorReturn(r,t)}return _inherits(s,_index.Component),_createClass(s,[{key:"_constructor",value:function(e){_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"_constructor",this).call(this,e),this.state={addressList:null},this.$$refs=[]}},{key:"componentWillMount",value:function(){var t=this;this.$router.params.choose||_index2.default.setNavigationBarTitle({title:"管理收货地址"});var e=function(){t.setState({addressList:null}),(0,_ajax2.default)({name:"getAllAddress",success:function(e){t.setState({addressList:e}),_index2.default.stopPullDownRefresh()}})};e(),_index2.default.eventCenter.on("update:address",function(){e()})}},{key:"onPullDownRefresh",value:function(){this.componentWillMount()}},{key:"onShareAppMessage",value:function(){}},{key:"_createData",value:function(){var a=this;this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};arguments[2];var o=this.$prefix,e=(0,_index.genCompid)(o+"$compid__54"),t=void 0,r=this.__state.addressList,s=this.$router.params.current;return r&&0<r.length?t=r.map(function(e,t){var r=(e={$original:(0,_index.internal_get_original)(e)}).$original.id===parseInt(s),n=(0,_index.genCompid)(o+"nqRyWaOdNb"+t);return _index.propsManager.set({address:e.$original,onClick:a.onClick,onEdit:a.onEdit,checked:r},n),{checked:r,$compid__53:n,$original:e.$original}}):r&&_index.propsManager.set({text:"当前没有收货地址，不能购买商品，快来添加一个吧",mainAction:""},e),Object.assign(this.__state,{loopArray10:t,$compid__54:e}),this.__state}}]),s}(),_class.$$events=["onAdd"],_class.$$componentPath="pages/address-list/address-list",_temp2);exports.default=AddressList,Component(require("../../npm/@tarojs/taro-weapp/index.js").default.createComponent(AddressList,!0));