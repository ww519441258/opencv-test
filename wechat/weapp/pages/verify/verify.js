"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp2,_createClass=function(){function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}}(),_get=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,o)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(o):void 0},_index=require("../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_verifyModuleScssMap=require("./verify.module.scss.map.js"),_verifyModuleScssMap2=_interopRequireDefault(_verifyModuleScssMap),_ajax=require("../../utils/ajax.js"),_ajax2=_interopRequireDefault(_ajax);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var s=e.apply(this,arguments);return new Promise(function(a,i){return function t(e,r){try{var o=s[e](r),n=o.value}catch(e){return void i(e)}if(!o.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});a(n)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Verify=(_temp2=_class=function(e){function s(){var e,t,r,o=this;_classCallCheck(this,s);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=r=_possibleConstructorReturn(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(a)))).$usedState=["$compid__118","$compid__119","hasVerified","style","virtualGoodsInfo","errorMessage"],r.config={navigationBarTitleText:"核销虚拟商品"},r.verify=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_ajax2.default)({name:"verifyVirtualGoods",data:{code:r.$router.params.scene},hintText:"核销"});case 2:r.setState({hasVerified:!0});case 3:case"end":return e.stop()}},e,o)})),r.customComponents=["GoodsCell","Tip","Loading"],_possibleConstructorReturn(r,t)}var t;return _inherits(s,_index.Component),_createClass(s,[{key:"_constructor",value:function(e){_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"_constructor",this).call(this,e),this.state={virtualGoodsInfo:null,hasVerified:!1,errorMessage:null},this.$$refs=[]}},{key:"onPullDownRefresh",value:function(){this.componentWillMount()}},{key:"componentWillMount",value:(t=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,o,n,a,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,_ajax2.default)({name:"getVerifyInfoForVirtualGoods",data:{code:this.$router.params.scene},hideToast:!0});case 3:t=e.sent,r=t.orderGoods,o=r.goods_id,n=r.goods_img,a=r.goods_name,i=r.shop_price,s=r.market_price,u=r.sku_type,this.setState({virtualGoodsInfo:{goods_id:o,goods_img:n,goods_name:a,shop_price:i,market_price:s,sku_type:u},errorMessage:null}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({virtualGoodsInfo:null,errorMessage:e.t0});case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return t.apply(this,arguments)})},{key:"_createData",value:function(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};arguments[2];var e=this.$prefix,t=(0,_index.genCompid)(e+"$compid__118"),r=(0,_index.genCompid)(e+"$compid__119"),o=this.__state,n=o.virtualGoodsInfo,a=(o.hasVerified,o.errorMessage);return n?_index.propsManager.set({goods:n},t):a&&_index.propsManager.set({icon:"unhappy",mainActionType:"home",text:a,mainAction:"返回首页"},r),Object.assign(this.__state,{$compid__118:t,$compid__119:r,style:_verifyModuleScssMap2.default}),this.__state}}]),s}(),_class.$$events=["verify"],_class.$$componentPath="pages/verify/verify",_temp2);exports.default=Verify,Component(require("../../npm/@tarojs/taro-weapp/index.js").default.createComponent(Verify,!0));