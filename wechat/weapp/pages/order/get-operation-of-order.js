"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}return r},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_slicedToArray=function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,n){var t=[],e=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(e=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);e=!0);}catch(r){o=!0,i=r}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}return t}(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")};exports.getOperation=getOperation;var _orderStatus=require("./order-status.js"),_operationOfOrder=require("./operation-of-order.js");function _defineProperty(r,n,t){return n in r?Object.defineProperty(r,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[n]=t,r}function _toConsumableArray(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}function getOperation(r){if(!r)return null;var n=(0,_orderStatus.getStatus)(r),t=(0,_orderStatus.getOrderType)(r),e=new Map([[{not:["未确认","待付款"],orderType:"普通订单"},{minorAction:_operationOfOrder.buyAgain,minorButton:"再次购买"}],["未确认",{mainAction:_operationOfOrder.confirm,mainButton:"积分兑换订单"===t?"确认兑换":"确认订单"}],["待付款",{mainAction:_operationOfOrder.pay,mainButton:"支付",minorAction:_operationOfOrder.cancel,minorButton:"取消订单"}],["待兑换",{mainAction:_operationOfOrder.exchange,mainButton:"兑换",minorAction:_operationOfOrder.cancel,minorButton:"取消订单"}],[["待发货","待提货"],{minorAction:_operationOfOrder.refund,minorButton:"申请退款"}],["待收货",{mainAction:_operationOfOrder.confirmReceive,mainButton:"确认收货",minorAction:_operationOfOrder.viewExpressInfo,minorButton:"查看物流"}],[["待提货","待核销"],{mainAction:_operationOfOrder.showQRCodeForVerifying,mainButton:"查看核销码"}],["申请退款中",{mainAction:_operationOfOrder.cancelRefund,mainButton:"取消退款"}]]),o=[].concat(_toConsumableArray(e)).filter(function(r){var e=_slicedToArray(r,1)[0];if("string"==typeof e)return e===n;if(Array.isArray(e))return e.includes(n);if("object"===(void 0===e?"undefined":_typeof(e))){var o={not:function(r){return!r.includes(n)},orderType:function(r){return r===t}};return Object.keys(e).reduce(function(r,n){var t=o[n];return r&&t&&t(e[n])},!0)}}),i=["mainAction","mainButton","minorAction","minorButton"];return o&&0<o.length?o.reduce(function(r,t){return _extends({},r,i.reduce(function(r,n){return _extends({},r,_defineProperty({},n,t[1][n]||null))},{}))},{}):null}