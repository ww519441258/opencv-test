"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var loginInWeapp=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_index2.default.login();case 3:return r=e.sent,n=r.code,e.abrupt("return",_index2.default.ajax(loginApiName.weapp,{code:n}));case 8:e.prev=8,e.t0=e.catch(0),(0,_helper.showError)(e.t0.errMsg);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),loginInWeb=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_index2.default.ajax(loginApiName.web,{openid:window.openid}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_index=require("../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_helper=require("../helper.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var u=e.apply(this,arguments);return new Promise(function(o,i){return function r(e,n){try{var t=u[e](n),a=t.value}catch(e){return void i(e)}if(!t.done)return Promise.resolve(a).then(function(e){r("next",e)},function(e){r("throw",e)});o(a)}("next")})}}var loginApiName={weapp:"loginForWeapp",web:"loginForWeb"};exports.default=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","WEAPP"===_index2.default.getEnv()?loginInWeapp():loginInWeb());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();