"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){_defineProperty(t,e,r[e])})}return t}var SHOW="@@DVA_LOADING/SHOW",HIDE="@@DVA_LOADING/HIDE",NAMESPACE="loading";function createLoading(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.namespace||NAMESPACE,r=e.only,c=void 0===r?[]:r,n=e.except,i=void 0===n?[]:n;if(0<c.length&&0<i.length)throw Error("It is ambiguous to configurate `only` and `except` items at the same time.");var f={global:!1,models:{},effects:{}};return{extraReducers:_defineProperty({},t,function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f,r=1<arguments.length?arguments[1]:void 0,n=r.type,o=r.payload||{},a=o.namespace,c=o.actionType;switch(n){case SHOW:e=_objectSpread({},t,{global:!0,models:_objectSpread({},t.models,_defineProperty({},a,!0)),effects:_objectSpread({},t.effects,_defineProperty({},c,!0))});break;case HIDE:var i=_objectSpread({},t.effects,_defineProperty({},c,!1)),p=_objectSpread({},t.models,_defineProperty({},a,Object.keys(i).some(function(e){return e.split("/")[0]===a&&i[e]})));e=_objectSpread({},t,{global:Object.keys(p).some(function(e){return p[e]}),models:p,effects:i});break;default:e=t}return e}),onEffect:function(r,e,t,n){var o=e.put,a=t.namespace;return 0===c.length&&0===i.length||0<c.length&&-1!==c.indexOf(n)||0<i.length&&-1===i.indexOf(n)?regeneratorRuntime.mark(function e(){var t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:SHOW,payload:{namespace:a,actionType:n}});case 2:return e.next=4,r.apply(void 0,t);case 4:return e.next=6,o({type:HIDE,payload:{namespace:a,actionType:n}});case 6:case"end":return e.stop()}},e)}):r}}}module.exports=createLoading;