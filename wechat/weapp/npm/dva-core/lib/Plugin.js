"use strict";var _interopRequireDefault=require("../../@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterHooks=filterHooks,exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("../../@babel/runtime/helpers/objectSpread.js")),_getIterator2=_interopRequireDefault(require("../../@babel/runtime/core-js/get-iterator.js")),_classCallCheck2=_interopRequireDefault(require("../../@babel/runtime/helpers/classCallCheck.js")),_createClass2=_interopRequireDefault(require("../../@babel/runtime/helpers/createClass.js")),_keys=_interopRequireDefault(require("../../@babel/runtime/core-js/object/keys.js")),_invariant=_interopRequireDefault(require("../../invariant/invariant.js")),_utils=require("./utils.js"),hooks=["onError","onStateChange","onAction","onHmr","onReducer","onEffect","extraReducers","extraEnhancers","_handleActions"];function filterHooks(t){return(0,_keys.default)(t).reduce(function(e,r){return-1<hooks.indexOf(r)&&(e[r]=t[r]),e},{})}var Plugin=function(){function e(){(0,_classCallCheck2.default)(this,e),this._handleActions=null,this.hooks=hooks.reduce(function(e,r){return e[r]=[],e},{})}return(0,_createClass2.default)(e,[{key:"use",value:function(e){(0,_invariant.default)((0,_utils.isPlainObject)(e),"plugin.use: plugin should be plain object");var r=this.hooks;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&((0,_invariant.default)(r[t],"plugin.use: unknown plugin property: ".concat(t)),"_handleActions"===t?this._handleActions=e[t]:"extraEnhancers"===t?r[t]=e[t]:r[t].push(e[t]))}},{key:"apply",value:function(e,u){var r=this.hooks;(0,_invariant.default)(-1<["onError","onHmr"].indexOf(e),"plugin.apply: hook ".concat(e," cannot be applied"));var i=r[e];return function(){if(i.length){var e=!0,r=!1,t=void 0;try{for(var n,a=(0,_getIterator2.default)(i);!(e=(n=a.next()).done);e=!0){n.value.apply(void 0,arguments)}}catch(e){r=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw t}}}else u&&u.apply(void 0,arguments)}}},{key:"get",value:function(e){var r=this.hooks;return(0,_invariant.default)(e in r,"plugin.get: hook ".concat(e," cannot be got")),"extraReducers"===e?getExtraReducers(r[e]):"onReducer"===e?getOnReducer(r[e]):r[e]}}]),e}();function getExtraReducers(e){var r={},t=!0,n=!1,a=void 0;try{for(var u,i=(0,_getIterator2.default)(e);!(t=(u=i.next()).done);t=!0){var o=u.value;r=(0,_objectSpread2.default)({},r,o)}}catch(e){n=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return r}function getOnReducer(i){return function(e){var r=!0,t=!1,n=void 0;try{for(var a,u=(0,_getIterator2.default)(i);!(r=(a=u.next()).done);r=!0){e=(0,a.value)(e)}}catch(e){t=!0,n=e}finally{try{r||null==u.return||u.return()}finally{if(t)throw n}}return e}}exports.default=Plugin;