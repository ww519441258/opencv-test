"use strict";exports.__esModule=!0,exports.default=throttle;var _fsmIterator=require("./fsmIterator.js"),_fsmIterator2=_interopRequireDefault(_fsmIterator),_io=require("../io.js"),_channel=require("../channel.js"),_buffers=require("../buffers.js"),_utils=require("../utils.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function throttle(e,r,t){for(var n=arguments.length,u=Array(3<n?n-3:0),o=3;o<n;o++)u[o-3]=arguments[o];var a=void 0,i=void 0,f={done:!1,value:(0,_io.actionChannel)(r,_buffers.buffers.sliding(1))},l={done:!1,value:(0,_io.call)(_utils.delay,e)},s=function(e){return a=e},_=function(e){return i=e};return(0,_fsmIterator2.default)({q1:function(){return["q2",f,_]},q2:function(){return["q3",{done:!1,value:(0,_io.take)(i)},s]},q3:function(){return a===_channel.END?[_fsmIterator.qEnd]:["q4",(e=a,{done:!1,value:_io.fork.apply(void 0,[t].concat(u,[e]))})];var e},q4:function(){return["q2",l]}},"q1","throttle("+(0,_fsmIterator.safeName)(r)+", "+t.name+")")}